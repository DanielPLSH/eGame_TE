<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest" tests="3" skipped="0" failures="0" errors="0" timestamp="2015-05-29T09:13:07" hostname="Ramon-PC" time="0.712">
  <properties/>
  <testcase name="testCancel_Game_Disable" classname="com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest" time="0.257"/>
  <testcase name="testCancel_OK" classname="com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest" time="0.266"/>
  <testcase name="testCancel_GameInstance_Disable" classname="com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest" time="0.187"/>
  <system-out><![CDATA[[2015-05-29 17:13:07,110][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:07,110][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:07,110][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@5a34f671) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:07,111][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:07,111][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,111][Test worker][INFO ][BaseTransactionalIntegrationTest] | MannualCancelByTicketIntegrationTest.testCancel_Game_Disable                                                           |
[2015-05-29 17:13:07,111][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,115][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,116][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Req.xml).
[2015-05-29 17:13:07,117][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787115|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-938829622), get digest:6d6df889c60b5d72fa0631dc9b07c052
[2015-05-29 17:13:07,117][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:07,117][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,117][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,117][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,117][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787115).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=6d6df889c60b5d72fa0631dc9b07c052).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,118][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,121][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9btrOyNtL8dAXOsCAt2VNz1Y3CyjizpWI1I8nQlwlEa8u3GnJdhPFqIwM+Go3KKjwWeZYUIZCCRGWj1yuQpJlzXfrBcB0y+SIx9BCcDqX9Cq9c2sM8doKNf2KfW5C60akmrLPtm4ds3wtET6JtIywgiNFKLcIdAG//+8JPC3fMLps3JnYw9/PChBNW4+JKSio1UkYGHWQMW8cZ8cWTDtVXm8ZINTl4bZYkVQl+v2xOSZWJfSo5PoTuCSV8U4FP7D/T6UDilZ4acW94+RrdCzF5xCwRJMMncqK4YeX8axPGnJNj8CfPsIS98AxpAtzOKg4eGW58K3qGmGJNAC9vxn2hqlnhCJ/guYLb6ysfRvd83y7AzPJ8taL+kqG6YmonjVwLMGX5NAyO1SNZJurVU7P5dRbgGIQtziq.
[2015-05-29 17:13:07,122][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787115|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,122][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>
[2015-05-29 17:13:07,123][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787115|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-938829622), get digest:6d6df889c60b5d72fa0631dc9b07c052
[2015-05-29 17:13:07,123][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,123][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/SellTicket_Req.xml
[2015-05-29 17:13:07,123][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,141][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_1.5.0).
[2015-05-29 17:13:07,141][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_).
[2015-05-29 17:13:07,141][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_200_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,146][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.digital.game.DigitalGameInstance) by(number=11002,gameId=FD-1, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:07,151][Test worker][INFO ][AbstractGameInstanceService] No channel game instance time definiton found, ignore it.
[2015-05-29 17:13:07,152][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745719300004969
[2015-05-29 17:13:07,159][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:07,163][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP4D9TKHAlcGC) as 150000
[2015-05-29 17:13:07,174][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,174][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,174][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,186][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP4D9TKHAlcGC) as 150000
[2015-05-29 17:13:07,191][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,191][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,191][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,199][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP4D9TKHAlcGC) as 150000
[2015-05-29 17:13:07,203][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,203][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,203][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,215][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP4D9TKHAlcGC) as 150000
[2015-05-29 17:13:07,219][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,219][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,219][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,238][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,239][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:07,239][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199999600.0, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,247][Test worker][WARN ][BaseJpaDao] Should be at most only 1 entity(com.mpos.lottery.te.merchant.domain.OperatorCommission) found, however total 2 entities found... the 1st entity(com.mpos.lottery.te.merchant.domain.OperatorCommission@1f458618) will be returned.
[2015-05-29 17:13:07,265][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.7]: transaction {
  id: "0115052900000000000381"
  dev_id: "111"
  operator_id: "OPERATOR-111"
  merchant_id: "111"
  create_time: 1432890787000
  trans_type: 200
  game_id: "FD-1"
  game_type: 7
  total_amount: "400.0"
}
multi_draw: 2
total_amount: "400.0"
serial_no: "aHhDkgTyIu50A2BrZKmpP4D9TKHAlcGC"
game_instance {
  id: "GII-112"
}
entries {
  selected_number: "0,3,2,8"
  bet_option: 4
  total_bets: 1
  entry_amount: "60.0"
  input_channel: "2"
}
entries {
  selected_number: "25"
  bet_option: -3
  total_bets: 1
  entry_amount: "140.0"
  input_channel: "2"
}

[2015-05-29 17:13:07,265][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:07,266][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,266][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket),mappingFile=xml-mapping/game/digital/SellTicket_Res.xml
[2015-05-29 17:13:07,266][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,267][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Res.xml).
[2015-05-29 17:13:07,267][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787115|Timestamp:20150529171307|Transaction-Type:4200|Transaction-Id:0115052900000000000381|Response-Code:200|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300004969" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqV7mzly/Kff4U=" validationCode="520351" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>):44dae2a9668d3e37d443758d27f4823f
[2015-05-29 17:13:07,268][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=652) succesfully.
[2015-05-29 17:13:07,268][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=652): <?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300004969" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqV7mzly/Kff4U=" validationCode="520351" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>
[2015-05-29 17:13:07,268][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,280][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,281][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml).
[2015-05-29 17:13:07,282][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787280|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300004969" isMannul="1"/>,hash=1627142996), get digest:6eeaf2d254d4a6bcaba5aa985e386e6f
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787280).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=6eeaf2d254d4a6bcaba5aa985e386e6f).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,282][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,283][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,287][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTrKw+NrMY+zMB7yQOqGCP1FKG6s9vxLTrvpYQyFpudw9.
[2015-05-29 17:13:07,287][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787280|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,287][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300004969" isMannul="1"/>
[2015-05-29 17:13:07,287][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787280|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300004969" isMannul="1"/>,hash=1627142996), get digest:6eeaf2d254d4a6bcaba5aa985e386e6f
[2015-05-29 17:13:07,287][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,287][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml
[2015-05-29 17:13:07,288][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,319][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_1.5.0).
[2015-05-29 17:13:07,319][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_).
[2015-05-29 17:13:07,319][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_201_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,330][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.digital.sale.service.DigitalSaleService) to cancel transaction(gameType=7,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:07,339][Test worker][ERROR][TEPortServlet] No manual cancellation allowed of game (gameId=FD-1).
com.mpos.lottery.te.config.exception.ApplicationException: No manual cancellation allowed of game (gameId=FD-1).
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.allowManualCancellation(AbstractTicketService.java:376)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelByTicket(AbstractTicketService.java:217)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelOrReverse(AbstractTicketService.java:283)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:203)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:227)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy55.reverseOrCancel(Unknown Source)
	at com.mpos.lottery.te.gameimpl.digital.DigitalController.cancelByTicket(DigitalController.java:46)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.mpos.lottery.common.router.RoutineRegistry.route(RoutineRegistry.java:57)
	at com.mpos.lottery.te.port.service.CommonFacadeService.routeRequest(CommonFacadeService.java:237)
	at com.mpos.lottery.te.port.service.CommonFacadeService.facade(CommonFacadeService.java:96)
	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy85.facade(Unknown Source)
	at com.mpos.lottery.te.port.TEPortServlet.doPost(TEPortServlet.java:121)
	at com.mpos.lottery.te.test.integration.BaseServletIntegrationTest.doPost(BaseServletIntegrationTest.java:80)
	at com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest.testCancel_Game_Disable(MannualCancelByTicketIntegrationTest.java:103)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)
	at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[2015-05-29 17:13:07,342][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787280|Timestamp:20150529171307|Transaction-Type:4201|Transaction-Id:0115052900000000000390|Response-Code:261|):e2496f66d3157e1ac61bed87797c526a
[2015-05-29 17:13:07,343][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=261,length=0): 
[2015-05-29 17:13:07,365][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:07,365][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:07,365][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@2b800b1e) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:07,366][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:07,366][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,366][Test worker][INFO ][BaseTransactionalIntegrationTest] | MannualCancelByTicketIntegrationTest.testCancel_OK                                                                     |
[2015-05-29 17:13:07,366][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,367][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,368][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Req.xml).
[2015-05-29 17:13:07,369][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787367|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-1943386165), get digest:4be0fe2b5e9ddd71aaa36c300e2ddad5
[2015-05-29 17:13:07,369][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:07,369][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,369][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,369][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,369][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787367).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=4be0fe2b5e9ddd71aaa36c300e2ddad5).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,370][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,372][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9btrOyNtL8dAXOsCAt2VNz1Y3CyjizpWI1I8nQlwlEa8u3GnJdhPFqIwM+Go3KKjwWeZYUIZCCRGWj1yuQpJlzXfrBcB0y+SIx9BCcDqX9Cq9c2sM8doKNf2KfW5C60akmrLPtm4ds3wtET6JtIywgiNFKLcIdAG//+8JPC3fMLps3JnYw9/PChBNW4+JKSio1UkYGHWQMW8cZ8cWTDtVXm8ZINTl4bZYkVQl+v2xOSZWJfSo5PoTuCSV8U4FP7D/T6UDilZ4acW94+RrdCzF5xCwRJMMncqK4YeX8axPGnJNj8CfPsIS98AxpAtzOKg4eGW58K3qGmGJNAC9vxn2hqlnhCJ/guYLb6ysfRvd83y7AzPJ8taL+kqG6YmonjVwLMGX5NAyO1SNZJurVU7P5dRbgGIQtziq.
[2015-05-29 17:13:07,372][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787367|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,373][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>
[2015-05-29 17:13:07,373][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787367|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-1943386165), get digest:4be0fe2b5e9ddd71aaa36c300e2ddad5
[2015-05-29 17:13:07,373][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,373][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/SellTicket_Req.xml
[2015-05-29 17:13:07,373][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,400][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_1.5.0).
[2015-05-29 17:13:07,400][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_).
[2015-05-29 17:13:07,401][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_200_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,406][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.digital.game.DigitalGameInstance) by(number=11002,gameId=FD-1, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:07,415][Test worker][INFO ][AbstractGameInstanceService] No channel game instance time definiton found, ignore it.
[2015-05-29 17:13:07,416][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745719300005095
[2015-05-29 17:13:07,422][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:07,427][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpPwt0ZYedawG2) as 150000
[2015-05-29 17:13:07,435][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,435][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,435][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,444][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpPwt0ZYedawG2) as 150000
[2015-05-29 17:13:07,449][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,449][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,449][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,456][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpPwt0ZYedawG2) as 150000
[2015-05-29 17:13:07,464][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,464][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,464][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,471][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpPwt0ZYedawG2) as 150000
[2015-05-29 17:13:07,475][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,476][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,476][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,497][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,497][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:07,497][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199999600.0, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,503][Test worker][WARN ][BaseJpaDao] Should be at most only 1 entity(com.mpos.lottery.te.merchant.domain.OperatorCommission) found, however total 2 entities found... the 1st entity(com.mpos.lottery.te.merchant.domain.OperatorCommission@7a07e605) will be returned.
[2015-05-29 17:13:07,515][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.7]: transaction {
  id: "0115052900000000000391"
  dev_id: "111"
  operator_id: "OPERATOR-111"
  merchant_id: "111"
  create_time: 1432890787000
  trans_type: 200
  game_id: "FD-1"
  game_type: 7
  total_amount: "400.0"
}
multi_draw: 2
total_amount: "400.0"
serial_no: "aHhDkgTyIu50A2BrZKmpPwt0ZYedawG2"
game_instance {
  id: "GII-112"
}
entries {
  selected_number: "0,3,2,8"
  bet_option: 4
  total_bets: 1
  entry_amount: "60.0"
  input_channel: "2"
}
entries {
  selected_number: "25"
  bet_option: -3
  total_bets: 1
  entry_amount: "140.0"
  input_channel: "2"
}

[2015-05-29 17:13:07,516][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:07,516][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,516][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket),mappingFile=xml-mapping/game/digital/SellTicket_Res.xml
[2015-05-29 17:13:07,516][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,518][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Res.xml).
[2015-05-29 17:13:07,518][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787367|Timestamp:20150529171307|Transaction-Type:4200|Transaction-Id:0115052900000000000391|Response-Code:200|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005095" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqVLKC71f02UTs=" validationCode="833999" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>):7b0aa2d051b0e5d0d9e0606c187fd4da
[2015-05-29 17:13:07,518][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=652) succesfully.
[2015-05-29 17:13:07,519][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=652): <?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005095" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqVLKC71f02UTs=" validationCode="833999" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>
[2015-05-29 17:13:07,519][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,528][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,529][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml).
[2015-05-29 17:13:07,530][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787528|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005095" isMannul="1"/>,hash=702039314), get digest:5085a05b4284393ff39e40d594b8a9d8
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787528).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=5085a05b4284393ff39e40d594b8a9d8).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,530][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,531][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,532][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTrKw+NrMY+zMZfY2VN+H2A010DrCT6opsBE3azotTjag.
[2015-05-29 17:13:07,533][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787528|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,533][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005095" isMannul="1"/>
[2015-05-29 17:13:07,533][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787528|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005095" isMannul="1"/>,hash=702039314), get digest:5085a05b4284393ff39e40d594b8a9d8
[2015-05-29 17:13:07,533][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,534][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml
[2015-05-29 17:13:07,534][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,555][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_1.5.0).
[2015-05-29 17:13:07,555][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_).
[2015-05-29 17:13:07,555][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_201_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,566][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.digital.sale.service.DigitalSaleService) to cancel transaction(gameType=7,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:07,581][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199999600, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,582][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:07,582][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,605][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.CANCEL.200.7]: origTrans {
  id: "0115052900000000000391"
  dev_id: "111"
  operator_id: "OPERATOR-111"
  merchant_id: "111"
  create_time: 1432890787000
  trans_type: 200
  game_id: "FD-1"
  game_type: 7
  total_amount: "400"
}
cancelTrans {
  id: "0115052900000000000400"
  dev_id: "111"
  operator_id: "OPERATOR-111"
  merchant_id: "111"
  create_time: 1432890787000
  trans_type: 210
  game_id: "FD-1"
  game_type: 7
  total_amount: "400"
}

[2015-05-29 17:13:07,606][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:07,606][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787528|Timestamp:20150529171307|Transaction-Type:4201|Transaction-Id:0115052900000000000400|Response-Code:200|):ed89cffe1d67c3329791eaaae24e86f5
[2015-05-29 17:13:07,606][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=0): 
[2015-05-29 17:13:07,628][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:07,628][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:07,628][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@690e2279) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:07,629][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:07,629][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,629][Test worker][INFO ][BaseTransactionalIntegrationTest] | MannualCancelByTicketIntegrationTest.testCancel_GameInstance_Disable                                                   |
[2015-05-29 17:13:07,629][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:07,631][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,632][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Req.xml).
[2015-05-29 17:13:07,632][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787631|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-964476693), get digest:8227a779d066798deebc416f0a6b87fd
[2015-05-29 17:13:07,632][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:07,632][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,632][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,632][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787631).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=8227a779d066798deebc416f0a6b87fd).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,633][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,635][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9btrOyNtL8dAXOsCAt2VNz1Y3CyjizpWI1I8nQlwlEa8u3GnJdhPFqIwM+Go3KKjwWeZYUIZCCRGWj1yuQpJlzXfrBcB0y+SIx9BCcDqX9Cq9c2sM8doKNf2KfW5C60akmrLPtm4ds3wtET6JtIywgiNFKLcIdAG//+8JPC3fMLps3JnYw9/PChBNW4+JKSio1UkYGHWQMW8cZ8cWTDtVXm8ZINTl4bZYkVQl+v2xOSZWJfSo5PoTuCSV8U4FP7D/T6UDilZ4acW94+RrdCzF5xCwRJMMncqK4YeX8axPGnJNj8CfPsIS98AxpAtzOKg4eGW58K3qGmGJNAC9vxn2hqlnhCJ/guYLb6ysfRvd83y7AzPJ8taL+kqG6YmonjVwLMGX5NAyO1SNZJurVU7P5dRbgGIQtziq.
[2015-05-29 17:13:07,635][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787631|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,635][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>
[2015-05-29 17:13:07,635][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787631|Timestamp:20150529171307|Transaction-Type:200|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket multipleDraws="2" totalAmount="400.0" PIN="!!!"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/><User mobile="13800138000" creditCardSN="09812091283120123" id="lai"/></Ticket>,hash=-964476693), get digest:8227a779d066798deebc416f0a6b87fd
[2015-05-29 17:13:07,635][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,635][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/SellTicket_Req.xml
[2015-05-29 17:13:07,635][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Req.xml) by key(7.transtype.200).
[2015-05-29 17:13:07,651][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_1.5.0).
[2015-05-29 17:13:07,651][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_200_).
[2015-05-29 17:13:07,651][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_200_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,656][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.digital.game.DigitalGameInstance) by(number=11002,gameId=FD-1, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:07,663][Test worker][INFO ][AbstractGameInstanceService] No channel game instance time definiton found, ignore it.
[2015-05-29 17:13:07,670][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745719300005194
[2015-05-29 17:13:07,678][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:07,680][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP3wimclqWSpj) as 150000
[2015-05-29 17:13:07,685][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,686][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,686][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,692][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP3wimclqWSpj) as 150000
[2015-05-29 17:13:07,696][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,696][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,696][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,703][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP3wimclqWSpj) as 150000
[2015-05-29 17:13:07,707][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,707][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=41, bettingNumber=null]
[2015-05-29 17:13:07,707][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(0,3,2,8, amount=60.0) is 50
[2015-05-29 17:13:07,714][Test worker][DEBUG][AbstractRiskControlService] Determine the final risk control limit of ticket(aHhDkgTyIu50A2BrZKmpP3wimclqWSpj) as 150000
[2015-05-29 17:13:07,717][Test worker][DEBUG][DigitalRiskControlService] There total 1 possible prize levels found, determine the final loss amount of prize level as 150000.00=150000/1
[2015-05-29 17:13:07,717][Test worker][DEBUG][AbstractRiskControlService] Prepare to generate risk control log of ChanceOdds [odds=50, prizelLevelType=-3, bettingNumber=25]
[2015-05-29 17:13:07,718][Test worker][DEBUG][AbstractRiskControlService] Determine the odds of betting number(25, amount=140.0) is 50
[2015-05-29 17:13:07,735][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,735][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:07,735][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199999600.0, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:07,740][Test worker][WARN ][BaseJpaDao] Should be at most only 1 entity(com.mpos.lottery.te.merchant.domain.OperatorCommission) found, however total 2 entities found... the 1st entity(com.mpos.lottery.te.merchant.domain.OperatorCommission@ee0376c) will be returned.
[2015-05-29 17:13:07,750][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.7]: transaction {
  id: "0115052900000000000401"
  dev_id: "111"
  operator_id: "OPERATOR-111"
  merchant_id: "111"
  create_time: 1432890787000
  trans_type: 200
  game_id: "FD-1"
  game_type: 7
  total_amount: "400.0"
}
multi_draw: 2
total_amount: "400.0"
serial_no: "aHhDkgTyIu50A2BrZKmpP3wimclqWSpj"
game_instance {
  id: "GII-112"
}
entries {
  selected_number: "0,3,2,8"
  bet_option: 4
  total_bets: 1
  entry_amount: "60.0"
  input_channel: "2"
}
entries {
  selected_number: "25"
  bet_option: -3
  total_bets: 1
  entry_amount: "140.0"
  input_channel: "2"
}

[2015-05-29 17:13:07,750][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:07,750][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,750][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket),mappingFile=xml-mapping/game/digital/SellTicket_Res.xml
[2015-05-29 17:13:07,750][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,751][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/SellTicket_Res.xml).
[2015-05-29 17:13:07,752][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787631|Timestamp:20150529171307|Transaction-Type:4200|Transaction-Id:0115052900000000000401|Response-Code:200|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005194" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqVOt0YNsko2M0=" validationCode="277791" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>):7430429d0d3d6c9c0afcbabed04f0263
[2015-05-29 17:13:07,752][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=652) succesfully.
[2015-05-29 17:13:07,753][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=652): <?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005194" type="1" lastDrawNo="11003" barcode="07cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKcp3InwF+WYqVOt0YNsko2M0=" validationCode="277791" multipleDraws="2" totalBets="4" totalAmount="400.0"><GameDraw number="11002" gameId="FD-1"/><Entry selectedNumber="0,3,2,8" betOption="4" inputChannel="2" entryAmount="60.0"/><Entry selectedNumber="25" betOption="-3" inputChannel="2" entryAmount="140.0"/></Ticket>
[2015-05-29 17:13:07,753][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/SellTicket_Res.xml) by key(7.transtype.4200).
[2015-05-29 17:13:07,762][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,762][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.digital.sale.DigitalTicket, mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml).
[2015-05-29 17:13:07,763][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787762|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005194" isMannul="1"/>,hash=-1461193254), get digest:eed5ef1969388346188c0606ea93a95d
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171307).
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890787762).
[2015-05-29 17:13:07,763][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:07,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:07,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=eed5ef1969388346188c0606ea93a95d).
[2015-05-29 17:13:07,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=7).
[2015-05-29 17:13:07,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:07,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:07,766][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTrKw+NrMY+zMQSbFqkSGia3i3HzkWxLDHnymkQxvFXoz.
[2015-05-29 17:13:07,766][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787762|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:07,766][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005194" isMannul="1"/>
[2015-05-29 17:13:07,766][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787762|Timestamp:20150529171307|Transaction-Type:201|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<Ticket serialNo="01110745719300005194" isMannul="1"/>,hash=-1461193254), get digest:eed5ef1969388346188c0606ea93a95d
[2015-05-29 17:13:07,766][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,766][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/digital/CancelTicket_Req.xml
[2015-05-29 17:13:07,766][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/digital/CancelTicket_Req.xml) by key(7.transtype.201).
[2015-05-29 17:13:07,786][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_1.5.0).
[2015-05-29 17:13:07,786][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(7_201_).
[2015-05-29 17:13:07,786][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(7_201_), found controller(com.mpos.lottery.te.gameimpl.digital.DigitalController@2c507c91) and method(public void com.mpos.lottery.te.gameimpl.digital.DigitalController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:07,793][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.digital.sale.service.DigitalSaleService) to cancel transaction(gameType=7,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:07,798][Test worker][ERROR][TEPortServlet] No manual cancellation allowed of game instance(gameId=FD-1,number=11002).
com.mpos.lottery.te.config.exception.ApplicationException: No manual cancellation allowed of game instance(gameId=FD-1,number=11002).
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.allowManualCancellation(AbstractTicketService.java:366)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelByTicket(AbstractTicketService.java:217)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelOrReverse(AbstractTicketService.java:283)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:203)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:227)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy55.reverseOrCancel(Unknown Source)
	at com.mpos.lottery.te.gameimpl.digital.DigitalController.cancelByTicket(DigitalController.java:46)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.mpos.lottery.common.router.RoutineRegistry.route(RoutineRegistry.java:57)
	at com.mpos.lottery.te.port.service.CommonFacadeService.routeRequest(CommonFacadeService.java:237)
	at com.mpos.lottery.te.port.service.CommonFacadeService.facade(CommonFacadeService.java:96)
	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy85.facade(Unknown Source)
	at com.mpos.lottery.te.port.TEPortServlet.doPost(TEPortServlet.java:121)
	at com.mpos.lottery.te.test.integration.BaseServletIntegrationTest.doPost(BaseServletIntegrationTest.java:80)
	at com.mpos.lottery.te.gameimpl.digital.sale.MannualCancelByTicketIntegrationTest.testCancel_GameInstance_Disable(MannualCancelByTicketIntegrationTest.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)
	at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[2015-05-29 17:13:07,800][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890787762|Timestamp:20150529171307|Transaction-Type:4201|Transaction-Id:0115052900000000000410|Response-Code:261|):df5b001493dfc4eb9e1852095b479733
[2015-05-29 17:13:07,800][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=261,length=0): 
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
