<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.mpos.lottery.te.merchant.ActivityReportIntegrationTest" tests="1" skipped="0" failures="0" errors="0" timestamp="2015-05-29T09:13:52" hostname="Ramon-PC" time="0.202">
  <properties/>
  <testcase name="testEnquiryActivityReport" classname="com.mpos.lottery.te.merchant.ActivityReportIntegrationTest" time="0.202"/>
  <system-out><![CDATA[[2015-05-29 17:13:52,821][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:52,821][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:52,821][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@687b6eb8) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:52,822][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:52,822][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:52,822][Test worker][INFO ][BaseTransactionalIntegrationTest] | ActivityReportIntegrationTest.testEnquiryActivityReport                                                                |
[2015-05-29 17:13:52,822][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:52,822][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Req.xml) by key(transtype.330).
[2015-05-29 17:13:52,831][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.merchant.web.ActivityReport, mappingFile=xml-mapping/ActivityReport_Req.xml).
[2015-05-29 17:13:52,831][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890832822|Timestamp:20150529171352|Transaction-Type:330|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<ActivityReport startTime="20150526171352" endTime="20150531171352"/>,hash=1547676298), get digest:ee99f97689e6202b4d0c4b95c7a9a424
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=330).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171352).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890832822).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=ee99f97689e6202b4d0c4b95c7a9a424).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=-1).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:52,832][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:52,835][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6uMTkfYoWC3zBnL8rtoKQ8U/sX2Irskk5VeH2pbwR8uZejdZ560waVrUu0pW6XugwbHAP2V5Yyk8TD5tkaUs4pNnI4BGE03znQ==.
[2015-05-29 17:13:52,835][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890832822|Timestamp:20150529171352|Transaction-Type:330|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:52,835][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:<?xml version="1.0" encoding="UTF-8"?>
<ActivityReport startTime="20150526171352" endTime="20150531171352"/>
[2015-05-29 17:13:52,835][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890832822|Timestamp:20150529171352|Transaction-Type:330|Transaction-Id:|Response-Code:|<?xml version="1.0" encoding="UTF-8"?>
<ActivityReport startTime="20150526171352" endTime="20150531171352"/>,hash=1547676298), get digest:ee99f97689e6202b4d0c4b95c7a9a424
[2015-05-29 17:13:52,835][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Req.xml) by key(transtype.330).
[2015-05-29 17:13:52,836][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/ActivityReport_Req.xml
[2015-05-29 17:13:52,836][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Req.xml) by key(transtype.330).
[2015-05-29 17:13:52,863][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(-1_330_1.5.0).
[2015-05-29 17:13:52,863][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(-1_330_).
[2015-05-29 17:13:52,863][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(-1_330_), found controller(com.mpos.lottery.te.merchant.MerchantController@720798ee) and method(public void com.mpos.lottery.te.merchant.MerchantController.enquiryActivityReport(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:52,864][Test worker][DEBUG][DefaultActivityReportService] No operator provided in request body, the X-Operator-Id(OPERATOR-111) will be used.
[2015-05-29 17:13:52,880][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of UNION:{"date":"20150529","reportItems":[{"transType":200,"numberOfTrans":3,"amount":7700.4,"tax":0,"commission":0},{"transType":204,"numberOfTrans":2,"amount":1500.1,"tax":0,"commission":0},{"transType":206,"numberOfTrans":1,"amount":600,"tax":0,"commission":0},{"transType":201,"numberOfTrans":1,"amount":2000.1,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,888][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of LUCKYNUMBER:{"date":"20150526","reportItems":[{"transType":200,"numberOfTrans":1,"amount":200,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,895][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of LFN:{"date":"20150526","reportItems":[{"transType":200,"numberOfTrans":1,"amount":2100,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,911][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of LOTTO:{"date":"20150529","reportItems":[{"transType":200,"numberOfTrans":3,"amount":10100.5,"tax":0,"commission":0},{"transType":204,"numberOfTrans":2,"amount":1500.1,"tax":0,"commission":0},{"transType":206,"numberOfTrans":1,"amount":600,"tax":0,"commission":0},{"transType":201,"numberOfTrans":1,"amount":2000.1,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,912][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of LOTTO:{"date":"20150528","reportItems":[{"transType":200,"numberOfTrans":1,"amount":200,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,920][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of DIGITAL:{"date":"20150526","reportItems":[{"transType":200,"numberOfTrans":1,"amount":2100,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,928][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of RAFFLE:{"date":"20150526","reportItems":[{"transType":200,"numberOfTrans":1,"amount":1400,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,936][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of Payout:{"date":"20150529","reportItems":[{"transType":302,"numberOfTrans":7,"amount":11530,"tax":80,"commission":0}]}
[2015-05-29 17:13:52,944][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of destination Operator Cash Out By Pass,Operator Cash Out Manually,Cashout of customer,cashout withdraw:{"date":"20150529","reportItems":[{"transType":302,"numberOfTrans":7,"amount":11530,"tax":80,"commission":0}]}
[2015-05-29 17:13:52,950][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of Cash Out By Pass,Operator Cash Out Manually,Income Balance Transfer,Top up by voucher,cashout withdraw,Cashout of customer:{"date":"20150529","reportItems":[{"transType":302,"numberOfTrans":7,"amount":11530,"tax":80,"commission":0}]}
[2015-05-29 17:13:52,958][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of Commission:{"date":"20150529","reportItems":[{"transType":302,"numberOfTrans":0,"amount":0,"tax":0,"commission":2},{"transType":200,"numberOfTrans":0,"amount":0,"tax":0,"commission":1},{"transType":99991161,"numberOfTrans":0,"amount":0,"tax":0,"commission":1},{"transType":456,"numberOfTrans":0,"amount":0,"tax":0,"commission":1},{"transType":353,"numberOfTrans":0,"amount":0,"tax":0,"commission":5},{"transType":447,"numberOfTrans":0,"amount":0,"tax":0,"commission":5}]}
[2015-05-29 17:13:52,967][Test worker][DEBUG][DefaultActivityReportService] DailyActivityReport of Commission:{"date":"20150529","reportItems":[{"transType":1161,"numberOfTrans":1,"amount":100,"tax":0,"commission":0}]}
[2015-05-29 17:13:52,970][Test worker][DEBUG][CommonFacadeService] No need to publish AMQP message of transaction(ACTIVITY_REPORT)
[2015-05-29 17:13:52,970][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Resp.xml) by key(transtype.4330).
[2015-05-29 17:13:52,970][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.merchant.web.ActivityReport),mappingFile=xml-mapping/ActivityReport_Resp.xml
[2015-05-29 17:13:52,970][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Resp.xml) by key(transtype.4330).
[2015-05-29 17:13:52,997][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.merchant.web.ActivityReport, mappingFile=xml-mapping/ActivityReport_Resp.xml).
[2015-05-29 17:13:52,998][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890832822|Timestamp:20150529171352|Transaction-Type:4330|Transaction-Id:0115052900000000002338|Response-Code:200|<?xml version="1.0" encoding="UTF-8"?>
<ActivityReport operatorId="OPERATOR-111" startTime="20150526171352" endTime="20150531171352"><StatActivity><ReportItem type="200" number="11" amount="23800.9" tax="0" commission="1"/><ReportItem type="204" number="4" amount="3000.2" tax="0" commission="0"/><ReportItem type="206" number="2" amount="1200" tax="0" commission="0"/><ReportItem type="201" number="2" amount="4000.2" tax="0" commission="0"/><ReportItem type="302" number="7" amount="11530" tax="80" commission="2"/><ReportItem type="353" number="1" amount="100" tax="0" commission="5"/><ReportItem type="447" number="1" amount="100" tax="0" commission="5"/><ReportItem type="456" number="1" amount="100" tax="0" commission="1"/><ReportItem type="99991161" number="0" amount="0" tax="0" commission="1"/><ReportItem type="1161" number="1" amount="100" tax="0" commission="0"/></StatActivity><DailyActivity date="20150526"><ReportItem type="200" number="4" amount="5800" tax="0" commission="0"/></DailyActivity><DailyActivity date="20150528"><ReportItem type="200" number="1" amount="200" tax="0" commission="0"/></DailyActivity><DailyActivity date="20150529"><ReportItem type="200" number="6" amount="17800.9" tax="0" commission="1"/><ReportItem type="204" number="4" amount="3000.2" tax="0" commission="0"/><ReportItem type="206" number="2" amount="1200" tax="0" commission="0"/><ReportItem type="201" number="2" amount="4000.2" tax="0" commission="0"/><ReportItem type="302" number="7" amount="11530" tax="80" commission="2"/><ReportItem type="353" number="1" amount="100" tax="0" commission="5"/><ReportItem type="447" number="1" amount="100" tax="0" commission="5"/><ReportItem type="456" number="1" amount="100" tax="0" commission="1"/><ReportItem type="99991161" number="0" amount="0" tax="0" commission="1"/><ReportItem type="1161" number="1" amount="100" tax="0" commission="0"/></DailyActivity></ActivityReport>):00ceee38432592a6d08adf6d73a6c33a
[2015-05-29 17:13:52,998][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=2572) succesfully.
[2015-05-29 17:13:52,999][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=2572): <?xml version="1.0" encoding="UTF-8"?>
<ActivityReport operatorId="OPERATOR-111" startTime="20150526171352" endTime="20150531171352"><StatActivity><ReportItem type="200" number="11" amount="23800.9" tax="0" commission="1"/><ReportItem type="204" number="4" amount="3000.2" tax="0" commission="0"/><ReportItem type="206" number="2" amount="1200" tax="0" commission="0"/><ReportItem type="201" number="2" amount="4000.2" tax="0" commission="0"/><ReportItem type="302" number="7" amount="11530" tax="80" commission="2"/><ReportItem type="353" number="1" amount="100" tax="0" commission="5"/><ReportItem type="447" number="1" amount="100" tax="0" commission="5"/><ReportItem type="456" number="1" amount="100" tax="0" commission="1"/><ReportItem type="99991161" number="0" amount="0" tax="0" commission="1"/><ReportItem type="1161" number="1" amount="100" tax="0" commission="0"/></StatActivity><DailyActivity date="20150526"><ReportItem type="200" number="4" amount="5800" tax="0" commission="0"/></DailyActivity><DailyActivity date="20150528"><ReportItem type="200" number="1" amount="200" tax="0" commission="0"/></DailyActivity><DailyActivity date="20150529"><ReportItem type="200" number="6" amount="17800.9" tax="0" commission="1"/><ReportItem type="204" number="4" amount="3000.2" tax="0" commission="0"/><ReportItem type="206" number="2" amount="1200" tax="0" commission="0"/><ReportItem type="201" number="2" amount="4000.2" tax="0" commission="0"/><ReportItem type="302" number="7" amount="11530" tax="80" commission="2"/><ReportItem type="353" number="1" amount="100" tax="0" commission="5"/><ReportItem type="447" number="1" amount="100" tax="0" commission="5"/><ReportItem type="456" number="1" amount="100" tax="0" commission="1"/><ReportItem type="99991161" number="0" amount="0" tax="0" commission="1"/><ReportItem type="1161" number="1" amount="100" tax="0" commission="0"/></DailyActivity></ActivityReport>
[2015-05-29 17:13:52,999][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/ActivityReport_Resp.xml) by key(transtype.4330).
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
