<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Fri May 29 17:11:35 CST 2015 -->
<title>AbstractRiskControlService (sourcecode 2.5.2-rc7 API)</title>
<meta name="date" content="2015-05-29">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractRiskControlService (sourcecode 2.5.2-rc7 API)";
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="跳过导航链接"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTrans.html" title="com.mpos.lottery.te.gamespec.sale.service中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html" target="_top">框架</a></li>
<li><a href="AbstractRiskControlService.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested_class_summary">嵌套</a>&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.mpos.lottery.te.gamespec.sale.service</div>
<h2 title="类 AbstractRiskControlService" class="title">类 AbstractRiskControlService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.mpos.lottery.te.gamespec.sale.service.AbstractRiskControlService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlService</a></dd>
</dl>
<dl>
<dt>直接已知子类:</dt>
<dd><a href="../../../../../../../com/mpos/lottery/te/gameimpl/digital/sale/support/DigitalRiskControlService.html" title="com.mpos.lottery.te.gameimpl.digital.sale.support中的类">DigitalRiskControlService</a>, <a href="../../../../../../../com/mpos/lottery/te/gameimpl/lfn/sale/support/LfnRiskControlService.html" title="com.mpos.lottery.te.gameimpl.lfn.sale.support中的类">LfnRiskControlService</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">AbstractRiskControlService</span>
extends java.lang.Object
implements <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlService</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTrans.html" title="com.mpos.lottery.te.gamespec.sale.service中的类">AbstractRiskControlService.JsonRiskControlTrans</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTransItem.html" title="com.mpos.lottery.te.gamespec.sale.service中的类">AbstractRiskControlService.JsonRiskControlTransItem</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#AbstractRiskControlService()">AbstractRiskControlService</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span>方法</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#assembleSingleSelectedNumbers(com.mpos.lottery.te.gamespec.sale.BaseEntry,%20int,%20int)">assembleSingleSelectedNumbers</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                             int&nbsp;kkk,
                             int&nbsp;betOption)</code>
<div class="block">Assemble single selected number based on a entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#cancelRiskControl(com.mpos.lottery.te.port.Context,%20java.util.List)">cancelRiskControl</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                 java.util.List&lt;? extends <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&gt;&nbsp;hostTickets)</code>
<div class="block">If client request to cancel the sale, the risk statistics(
 <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/RiskControlLog.html" title="com.mpos.lottery.te.gamespec.sale中的类"><code>RiskControlLog</code></a>) must be rolled back as well.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineBettingNumberOfPrizeLevel(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseEntry,%20com.mpos.lottery.te.gamespec.sale.support.ChanceOdds,%20com.mpos.lottery.te.gamespec.sale.support.ChanceOfEntry)">determineBettingNumberOfPrizeLevel</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&nbsp;chanceOdd,
                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&nbsp;chance)</code>
<div class="block">Determine the betting number of a specific prize level.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.math.BigDecimal</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineFinalLimit(com.mpos.lottery.te.gamespec.sale.BaseEntry,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance)">determineFinalLimit</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance)</code>
<div class="block">Determine the final limit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract java.math.BigDecimal</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineFinalLossAmountOfPrizeLevel(java.math.BigDecimal,%20java.util.List,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance)">determineFinalLossAmountOfPrizeLevel</a></strong>(java.math.BigDecimal&nbsp;finalLimit,
                                    java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&gt;&nbsp;chanceOdds,
                                    <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance)</code>
<div class="block">Determine the final loss amount of a prize level.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineOddsOfEntry(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance,%20com.mpos.lottery.te.gamespec.sale.BaseEntry)">determineOddsOfEntry</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                    <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                    <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                    <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry)</code>
<div class="block">Determine the odds of given entry.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.math.BigDecimal</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineRiskPrizeAmount(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.RiskControlLog,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance,%20com.mpos.lottery.te.gamespec.sale.BaseEntry,%20com.mpos.lottery.te.gamespec.sale.support.ChanceOfEntry,%20com.mpos.lottery.te.gamespec.sale.support.ChanceOdds)">determineRiskPrizeAmount</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/RiskControlLog.html" title="com.mpos.lottery.te.gamespec.sale中的类">RiskControlLog</a>&nbsp;riskLog,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&nbsp;chance,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&nbsp;chanceOdds)</code>
<div class="block">Calculate the risk prize amount.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#determineSelectedNumbers(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance,%20com.mpos.lottery.te.gamespec.sale.BaseEntry)">determineSelectedNumbers</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry)</code>
<div class="block">Determine how many chances derived from given entry, for example a 'multiple' selected number can generate many
 'single' selected number, and each 'single' selected number is a chance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#doRiskConrolOnEntry(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20com.mpos.lottery.te.gamespec.game.BaseGameInstance,%20com.mpos.lottery.te.gamespec.sale.BaseEntry,%20java.math.BigDecimal,%20com.mpos.lottery.te.gamespec.sale.service.AbstractRiskControlService.JsonRiskControlTrans)">doRiskConrolOnEntry</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                   java.math.BigDecimal&nbsp;finalLimit,
                   <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTrans.html" title="com.mpos.lottery.te.gamespec.sale.service中的类">AbstractRiskControlService.JsonRiskControlTrans</a>&nbsp;jsonTrans)</code>
<div class="block">Apply risk control on given entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>javax.persistence.EntityManager</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#getEntityManager()">getEntityManager</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/InstantaneousSaleDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">InstantaneousSaleDao</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#getInstantaneousSaleDao()">getInstantaneousSaleDao</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/RiskControlLogDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">RiskControlLogDao</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#getRiskControlLogDao()">getRiskControlLogDao</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlLogServiceAsyn.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlLogServiceAsyn</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#getRiskControlLogServiceAsyn()">getRiskControlLogServiceAsyn</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#riskControl(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20java.util.List)">riskControl</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
           <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
           java.util.List&lt;? extends <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&gt;&nbsp;gameInstances)</code>
<div class="block">The basic idea of risk control is to check whether the total prize amount of a given selected number will exceed
 the ability to pay of operation company.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#setEntityManager(javax.persistence.EntityManager)">setEntityManager</a></strong>(javax.persistence.EntityManager&nbsp;entityManager)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#setInstantaneousSaleDao(com.mpos.lottery.te.gamespec.sale.dao.InstantaneousSaleDao)">setInstantaneousSaleDao</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/InstantaneousSaleDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">InstantaneousSaleDao</a>&nbsp;instantaneousSaleDao)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#setRiskControlLogDao(com.mpos.lottery.te.gamespec.sale.dao.RiskControlLogDao)">setRiskControlLogDao</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/RiskControlLogDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">RiskControlLogDao</a>&nbsp;riskControlLogDao)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html#setRiskControlLogServiceAsyn(com.mpos.lottery.te.gamespec.sale.service.RiskControlLogServiceAsyn)">setRiskControlLogServiceAsyn</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlLogServiceAsyn.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlLogServiceAsyn</a>&nbsp;riskControlLogServiceAsyn)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="AbstractRiskControlService()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractRiskControlService</h4>
<pre>public&nbsp;AbstractRiskControlService()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="riskControl(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.BaseTicket, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>riskControl</h4>
<pre>public&nbsp;void&nbsp;riskControl(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
               <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
               java.util.List&lt;? extends <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&gt;&nbsp;gameInstances)
                 throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block"><strong>从接口复制的说明:&nbsp;<code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html#riskControl(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20java.util.List)">RiskControlService</a></code></strong></div>
<div class="block">The basic idea of risk control is to check whether the total prize amount of a given selected number will exceed
 the ability to pay of operation company. That says once the given selected number wins, and many people buy that
 selected number, operation company may have to pay too much prize amount and fall in loss situation.
 <p>
 <b>The prize amount of a given selected number means the max prize amount a selected number may win, in general
 it is the 1st prize. </b>
 <p>
 System should support 2 kinds of risk control methods:
 
 <h2>1. Maximum LOSS Method</h2>
 <p>
 Operation company will set a limit, once the prize amount of a given selected number exceeds this limit, the sale
 request will be rejected.
 <p>
 For example, the bet amount of a selected number(single bet option) of '1,2,3,4,5' is 50, its odd is 40 times,
 and the limit is 2060.
 <ol>
 <li>A sale of this selected number comes, the bet amount is 1, the prize amount will be 51*40=2040, it is ok, the
 sale will be accepted.</li>
 <li>One more sale of this selected number comes, the bet amount is 1 too, the prize amount will be 52*40=2080
 which is greater than the limit 2060, this sale will be rejected.</li>
 </ol>
 
 <h2>2. Dynamic Method</h2>
 <p>
 Operation company will set a limit of allowed prize amount of a single selected number ,same with the 1st method
 'Maximum LOSS Method', and also will set a percentage of turnover. The final limit will be
 <b>max(preconfigured_limit, turnover*percentage)</b>, once the final limit is confirmed, the possible max prize
 amount of a given selected number will be compared with this limit, just like the 1st method.
 <p>
 Lets say the pre-configured prize limit is 2060, the turnover of current game instance is 5000, the percentage is
 42%,(5000*0.42=2100), the bet amount of a given selected number is 50 now, and the odd is 40 times.
 <ol>
 <li>New sale comes, its bet amount is 2, the limit of turnover percentage is (5000+2)*0.42=2100.84 which is
 greater than the pre-configured limit 2060, so the final limit will be 2100.84. The possible prize amount is
 (50+2)*40=2080, it is less than the final limit, sale is accepted.</li>
 <li>New sale comes, its bet amount is 10, the limit of turnover percentage is (5000+2+10)*0.42=2105.04 which is
 greater than the pre-configured limit 2060, so the final limit will be 2105.04. The possible prize amount is
 (50+2+10)*40=2480, it is greater than the final limit, sale is rejected.
 <p>
 Note that in this step the bet amount 10 is the amount of ticket, not a entry.</li>
 </ol></div>
<dl>
<dt><strong>指定者:</strong></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html#riskControl(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gamespec.sale.BaseTicket,%20java.util.List)">riskControl</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlService</a></code></dd>
<dt><span class="strong">参数:</span></dt><dd><code>respCtx</code> - The context of current transaction.</dd><dd><code>ticket</code> - The sale instance.</dd><dd><code>gameInstances</code> - The game instances associate with the sold ticket, maybe multiple-draw ticket.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - when fail to pass risk control checking.</dd></dl>
</li>
</ul>
<a name="cancelRiskControl(com.mpos.lottery.te.port.Context, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelRiskControl</h4>
<pre>public&nbsp;void&nbsp;cancelRiskControl(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                     java.util.List&lt;? extends <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&gt;&nbsp;hostTickets)
                       throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block"><strong>从接口复制的说明:&nbsp;<code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html#cancelRiskControl(com.mpos.lottery.te.port.Context,%20java.util.List)">RiskControlService</a></code></strong></div>
<div class="block">If client request to cancel the sale, the risk statistics(
 <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/RiskControlLog.html" title="com.mpos.lottery.te.gamespec.sale中的类"><code>RiskControlLog</code></a>) must be rolled back as well.</div>
<dl>
<dt><strong>指定者:</strong></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html#cancelRiskControl(com.mpos.lottery.te.port.Context,%20java.util.List)">cancelRiskControl</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlService.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlService</a></code></dd>
<dt><span class="strong">参数:</span></dt><dd><code>respCtx</code> - The context of current transaction</dd><dd><code>hostTickets</code> - The list of cancelled tickets.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - if any exception</dd></dl>
</li>
</ul>
<a name="doRiskConrolOnEntry(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.BaseTicket, com.mpos.lottery.te.gamespec.game.BaseGameInstance, com.mpos.lottery.te.gamespec.sale.BaseEntry, java.math.BigDecimal, com.mpos.lottery.te.gamespec.sale.service.AbstractRiskControlService.JsonRiskControlTrans)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRiskConrolOnEntry</h4>
<pre>protected final&nbsp;void&nbsp;doRiskConrolOnEntry(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                       java.math.BigDecimal&nbsp;finalLimit,
                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTrans.html" title="com.mpos.lottery.te.gamespec.sale.service中的类">AbstractRiskControlService.JsonRiskControlTrans</a>&nbsp;jsonTrans)
                                  throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Apply risk control on given entry.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>respCtx</code> - The context of current sale transaction.</dd><dd><code>ticket</code> - The ticket which contains given entry.</dd><dd><code>gameInstance</code> - In which the turnover will be verified...consider a multi-draw ticket.</dd><dd><code>entry</code> - Apply risk control method on this entry.</dd><dd><code>finalLimit</code> - The final amount of loss.</dd><dd><code>jsonTrans</code> - The transaction log which will be used when cancellation.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="determineFinalLossAmountOfPrizeLevel(java.math.BigDecimal, java.util.List, com.mpos.lottery.te.gamespec.game.BaseGameInstance)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineFinalLossAmountOfPrizeLevel</h4>
<pre>protected abstract&nbsp;java.math.BigDecimal&nbsp;determineFinalLossAmountOfPrizeLevel(java.math.BigDecimal&nbsp;finalLimit,
                                                        java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&gt;&nbsp;chanceOdds,
                                                        <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance)
                                                                      throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Determine the final loss amount of a prize level. In general it should be
 <code>(finalLimit/countOfPrizeLevelOfGameInstance)</code></div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>finalLimit</code> - The allowed loss prize amount of a game instance.</dd><dd><code>chanceOdds</code> - THose chance odds of a given entry.</dd><dd><code>gameInstance</code> - the game instance of current sale.</dd>
<dt><span class="strong">返回:</span></dt><dd>The final loss amount of a prize level</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="determineBettingNumberOfPrizeLevel(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.BaseEntry, com.mpos.lottery.te.gamespec.sale.support.ChanceOdds, com.mpos.lottery.te.gamespec.sale.support.ChanceOfEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineBettingNumberOfPrizeLevel</h4>
<pre>protected abstract&nbsp;java.lang.String&nbsp;determineBettingNumberOfPrizeLevel(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&nbsp;chanceOdd,
                                                  <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&nbsp;chance)
                                                                throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Determine the betting number of a specific prize level. For example a '4D' entry '2,0,1,4' may win 'First4D',
 'first3D' and 'last3d', then the betting number of each prize level types will be,
 <ul>
 <li>first4d - 2,0,1,4</li>
 <li>first3d - 2,0,1</li>
 <li>last3d - 0,1,4</li>
 </ul></div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>respCtx</code> - The context of current transaction.</dd><dd><code>entry</code> - the ticket entry.</dd><dd><code>chanceOdd</code> - The odds and prize level type of a given chance.</dd><dd><code>chance</code> - The chance which may win a prize.</dd>
<dt><span class="strong">返回:</span></dt><dd>the betting number of a specific prize level</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - if encounter any biz exception.</dd></dl>
</li>
</ul>
<a name="determineRiskPrizeAmount(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.RiskControlLog, com.mpos.lottery.te.gamespec.sale.BaseTicket, com.mpos.lottery.te.gamespec.game.BaseGameInstance, com.mpos.lottery.te.gamespec.sale.BaseEntry, com.mpos.lottery.te.gamespec.sale.support.ChanceOfEntry, com.mpos.lottery.te.gamespec.sale.support.ChanceOdds)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineRiskPrizeAmount</h4>
<pre>protected&nbsp;java.math.BigDecimal&nbsp;determineRiskPrizeAmount(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/RiskControlLog.html" title="com.mpos.lottery.te.gamespec.sale中的类">RiskControlLog</a>&nbsp;riskLog,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&nbsp;chance,
                                            <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&nbsp;chanceOdds)</pre>
<div class="block">Calculate the risk prize amount.</div>
</li>
</ul>
<a name="determineOddsOfEntry(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.BaseTicket, com.mpos.lottery.te.gamespec.game.BaseGameInstance, com.mpos.lottery.te.gamespec.sale.BaseEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineOddsOfEntry</h4>
<pre>protected abstract&nbsp;java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOdds.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOdds</a>&gt;&nbsp;determineOddsOfEntry(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                                              <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                                              <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                                              <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry)
                                                            throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Determine the odds of given entry. Even a multiple entry, all single selected number share the same odds.The risk
 prize amount should be the max prize amount a selected number possibly win.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>respCtx</code> - The context of sale transaction.</dd><dd><code>ticket</code> - The sold ticket.</dd><dd><code>gameInstance</code> - In which the turnover will be verified. The ticket.getGameInstance() will always return the game
            instance which is the one in which the ticket is sold.</dd><dd><code>entry</code> - The entry from which the single selected numbers derived.</dd>
<dt><span class="strong">返回:</span></dt><dd>All possible prize levels a entry may win</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - if fail to get risk prize amount.</dd></dl>
</li>
</ul>
<a name="determineSelectedNumbers(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gamespec.sale.BaseTicket, com.mpos.lottery.te.gamespec.game.BaseGameInstance, com.mpos.lottery.te.gamespec.sale.BaseEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineSelectedNumbers</h4>
<pre>protected&nbsp;java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&gt;&nbsp;determineSelectedNumbers(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;respCtx,
                                                     <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                                                     <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance,
                                                     <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry)</pre>
<div class="block">Determine how many chances derived from given entry, for example a 'multiple' selected number can generate many
 'single' selected number, and each 'single' selected number is a chance.
 <p/>
 The subclass can override this.</div>
</li>
</ul>
<a name="determineFinalLimit(com.mpos.lottery.te.gamespec.sale.BaseEntry, com.mpos.lottery.te.gamespec.sale.BaseTicket, com.mpos.lottery.te.gamespec.game.BaseGameInstance)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineFinalLimit</h4>
<pre>protected&nbsp;java.math.BigDecimal&nbsp;determineFinalLimit(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseTicket.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseTicket</a>&nbsp;ticket,
                                       <a href="../../../../../../../com/mpos/lottery/te/gamespec/game/BaseGameInstance.html" title="com.mpos.lottery.te.gamespec.game中的类">BaseGameInstance</a>&nbsp;gameInstance)</pre>
<div class="block">Determine the final limit. The final limit is up to the risk control method. For 'max loss method', the final
 limit will be <code>gameInstance.maxLossAmount</code>. If 'dynamic method', the final limit will be
 <code>max(gameInstance.maxLossAmount, turnover*gameInstance.percentageOfTurnover)</code></div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>entry</code> - The entry which will apply risk control checking on.</dd><dd><code>ticket</code> - The sold ticket.</dd><dd><code>gameInstance</code> - the game instance in which the turnover will be counted...think about multi-draw ticket.</dd>
<dt><span class="strong">返回:</span></dt><dd>the final limit of risk control.</dd></dl>
</li>
</ul>
<a name="assembleSingleSelectedNumbers(com.mpos.lottery.te.gamespec.sale.BaseEntry, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assembleSingleSelectedNumbers</h4>
<pre>protected&nbsp;java.util.List&lt;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/support/ChanceOfEntry.html" title="com.mpos.lottery.te.gamespec.sale.support中的类">ChanceOfEntry</a>&gt;&nbsp;assembleSingleSelectedNumbers(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/BaseEntry.html" title="com.mpos.lottery.te.gamespec.sale中的类">BaseEntry</a>&nbsp;entry,
                                                          int&nbsp;kkk,
                                                          int&nbsp;betOption)</pre>
<div class="block">Assemble single selected number based on a entry.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>entry</code> - The ticket entries.</dd><dd><code>kkk</code> - The count of numbers of a single selected-number.</dd><dd><code>betOption</code> - The bet option of chance.</dd>
<dt><span class="strong">返回:</span></dt><dd>All possible single selected numbers.</dd></dl>
</li>
</ul>
<a name="getInstantaneousSaleDao()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstantaneousSaleDao</h4>
<pre>public&nbsp;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/InstantaneousSaleDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">InstantaneousSaleDao</a>&nbsp;getInstantaneousSaleDao()</pre>
</li>
</ul>
<a name="setInstantaneousSaleDao(com.mpos.lottery.te.gamespec.sale.dao.InstantaneousSaleDao)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setInstantaneousSaleDao</h4>
<pre>public&nbsp;void&nbsp;setInstantaneousSaleDao(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/InstantaneousSaleDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">InstantaneousSaleDao</a>&nbsp;instantaneousSaleDao)</pre>
</li>
</ul>
<a name="getRiskControlLogDao()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRiskControlLogDao</h4>
<pre>public&nbsp;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/RiskControlLogDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">RiskControlLogDao</a>&nbsp;getRiskControlLogDao()</pre>
</li>
</ul>
<a name="setRiskControlLogDao(com.mpos.lottery.te.gamespec.sale.dao.RiskControlLogDao)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRiskControlLogDao</h4>
<pre>public&nbsp;void&nbsp;setRiskControlLogDao(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/dao/RiskControlLogDao.html" title="com.mpos.lottery.te.gamespec.sale.dao中的接口">RiskControlLogDao</a>&nbsp;riskControlLogDao)</pre>
</li>
</ul>
<a name="getRiskControlLogServiceAsyn()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRiskControlLogServiceAsyn</h4>
<pre>public&nbsp;<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlLogServiceAsyn.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlLogServiceAsyn</a>&nbsp;getRiskControlLogServiceAsyn()</pre>
</li>
</ul>
<a name="setRiskControlLogServiceAsyn(com.mpos.lottery.te.gamespec.sale.service.RiskControlLogServiceAsyn)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRiskControlLogServiceAsyn</h4>
<pre>public&nbsp;void&nbsp;setRiskControlLogServiceAsyn(<a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/RiskControlLogServiceAsyn.html" title="com.mpos.lottery.te.gamespec.sale.service中的接口">RiskControlLogServiceAsyn</a>&nbsp;riskControlLogServiceAsyn)</pre>
</li>
</ul>
<a name="getEntityManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntityManager</h4>
<pre>public&nbsp;javax.persistence.EntityManager&nbsp;getEntityManager()</pre>
</li>
</ul>
<a name="setEntityManager(javax.persistence.EntityManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setEntityManager</h4>
<pre>public&nbsp;void&nbsp;setEntityManager(javax.persistence.EntityManager&nbsp;entityManager)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="跳过导航链接"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../../../com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.JsonRiskControlTrans.html" title="com.mpos.lottery.te.gamespec.sale.service中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/mpos/lottery/te/gamespec/sale/service/AbstractRiskControlService.html" target="_top">框架</a></li>
<li><a href="AbstractRiskControlService.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested_class_summary">嵌套</a>&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
