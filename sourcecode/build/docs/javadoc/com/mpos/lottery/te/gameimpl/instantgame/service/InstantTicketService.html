<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Fri May 29 17:11:13 CST 2015 -->
<title>InstantTicketService (sourcecode 2.5.2-rc7 API)</title>
<meta name="date" content="2015-05-29">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="InstantTicketService (sourcecode 2.5.2-rc7 API)";
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="跳过导航链接"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantOperatorService.html" title="com.mpos.lottery.te.gameimpl.instantgame.service中的接口"><span class="strong">上一个类</span></a></li>
<li>下一个类</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html" target="_top">框架</a></li>
<li><a href="InstantTicketService.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.mpos.lottery.te.gameimpl.instantgame.service</div>
<h2 title="接口 InstantTicketService" class="title">接口 InstantTicketService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已知实现类:</dt>
<dd><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/impl/InstantTicketServiceImpl.html" title="com.mpos.lottery.te.gameimpl.instantgame.service.impl中的类">InstantTicketServiceImpl</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">InstantTicketService</span></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span>方法</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ActiveResult.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ActiveResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#active(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.ActiveCriteria)">active</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ActiveCriteria.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ActiveCriteria</a>&nbsp;criteria)</code>
<div class="block">Set all tickets with same packet serialNO to active.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#active(com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket)">active</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket)</code>
<div class="block">Active a instant ticket real-time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#batchValidate(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchPayoutDto)">batchValidate</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
             <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;payouts)</code>
<div class="block">Do validation in a batch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#ConfirmBatchValidation(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchReportDto)">ConfirmBatchValidation</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;response,
                      <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;dto)</code>
<div class="block">Users will submit all tickets uploaded by partial package transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#enquiryPrize(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket,%20boolean)">enquiryPrize</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
            <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket,
            boolean&nbsp;isWinnerCounted)</code>
<div class="block">Enquiry the prize information of the given ticket.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#getReportOfConfirmBatchValidation(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchReportDto)">getReportOfConfirmBatchValidation</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                                 <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;dto)</code>
<div class="block">Query the batch upload success and failure votes and return Actual amount ,tax amount.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#offlineBatchValidate(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchPayoutDto)">offlineBatchValidate</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                    <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;req)</code>
<div class="block">Handle the batch upload of offline IG validation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantOfflineTicketResult.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantOfflineTicketResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#offlineInfoUpload(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantOfflineTickets)">offlineInfoUpload</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantOfflineTickets.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantOfflineTickets</a>&nbsp;offlineTicket)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ConfirmBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ConfirmBatchPayoutDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#partialPackage(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.ConfirmBatchPayoutDto)">partialPackage</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;response,
              <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ConfirmBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ConfirmBatchPayoutDto</a>&nbsp;confirmBatchPayout)</code>
<div class="block">Complete each batch validation tansaction of a confiration batch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#receive(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.Packet)">receive</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/Packet.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">Packet</a>&nbsp;packet)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#sell(com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket)">sell</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket)</code>
<div class="block">Sell a instant ticket at real time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html#validate(com.mpos.lottery.te.port.Context,%20com.mpos.lottery.te.gameimpl.instantgame.domain.dto.PrizeLevelDto)">validate</a></strong>(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
        <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a>&nbsp;payout)</code>
<div class="block">Validate an IG ticket to verify whether it is a winning ticket.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="active(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.ActiveCriteria)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>active</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ActiveResult.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ActiveResult</a>&nbsp;active(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ActiveCriteria.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ActiveCriteria</a>&nbsp;criteria)
                    throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Set all tickets with same packet serialNO to active.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="active(com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>active</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;active(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket)
                     throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Active a instant ticket real-time. Below pre-condition must be fulfilled:
 <ol>
 <li>The ticket must exist in the backend.</li>
 <li>The ticket is sold(sold to distributor).</li>
 <li>The ticket can not be in blacklist.</li>
 <li>The game draw is not inactive.</li>
 <li>Current time is after gameDraw.startActivationTime.</li>
 </ol></div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>ticket</code> - The instant ticket which specify the ticket serial number.</dd>
<dt><span class="strong">返回:</span></dt><dd>the handled ticket which specify the total amount.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="validate(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.PrizeLevelDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a>&nbsp;validate(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                     <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a>&nbsp;payout)
                       throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Validate an IG ticket to verify whether it is a winning ticket. A ticket can win cash, object, or cash+object, it
 depends on the prize logic definition of the requeseted game instance. For eGame algorithm, this operation will
 calculate the prize level based on serialNo and VIRN, and then lookup concret prize by prize logic and level.
 <p/>
 The implementation has to always check whether a ticket wins a cash or object prize.
 <p/>
 <b>Pre-Condition</b>
 <ul>
 <li>The ticket must exist in the backend.</li>
 <li>The ticket is active.</li>
 <li>The ticket can not be in blacklist.</li>
 <li>Game draw is not 'block payout'.</li>
 <li>Current time is before stop payout time.</li>
 </ul>
 <b>Post-Conditions</b>
 <p/>
 <ul>
 <li>A successful call to this interface will return a InstantPayoutDto which contains detailed prize information.
 </li>
 <li>The ticket must be marked as 'validated' status.</li>
 <li>The payout details, including cash and object, must be recorded. The prizeAmount/taxAmount of object
 prize(table 'Payout_Detail') won't be counted in summary(table 'Payout') payout(only cash prize will be counted).
 </li>
 <li>The credit-level of all related merchants must be updated(commission must be counted into credit-level too).</li>
 </ul>
 <b>Usage Restrictions</b>
 <ul>
 <li>Authorization - No authorization required.</li>
 <li>Concurrent Access - No concurrent access allowed from a single device.</li>
 </ul></div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>payout</code> - The following components of this argument must be not null:inputChannel,ticket.serialNo,
            ticket.ticketXOR3, actualAmount(if requires client provide this field, based on system configuration).</dd>
<dt><span class="strong">返回:</span></dt><dd>detailed prize information, including cash, object prize.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - when encounter any business related exception.</dd></dl>
</li>
</ul>
<a name="batchValidate(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchPayoutDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchValidate</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;batchValidate(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                                  <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;payouts)
                                    throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Do validation in a batch.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="offlineInfoUpload(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantOfflineTickets)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offlineInfoUpload</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantOfflineTicketResult.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantOfflineTicketResult</a>&nbsp;offlineInfoUpload(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantOfflineTickets.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantOfflineTickets</a>&nbsp;offlineTicket)
                                             throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="sell(com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sell</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;sell(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket)
                   throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Sell a instant ticket at real time. Below condition must be fulfilled:
 <ol>
 <li>The ticket must exist in the backend.</li>
 <li>The ticket can NOT be in blacklist.</li>
 <li>The ticket must be inactive.</li>
 </ol>
 After sale, ticket will be active, and isSold=true, isSold2Customer=true.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="receive(com.mpos.lottery.te.gameimpl.instantgame.domain.dto.Packet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>void&nbsp;receive(<a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/Packet.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">Packet</a>&nbsp;packet)
             throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="enquiryPrize(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.InstantTicket, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enquiryPrize</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/PrizeLevelDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">PrizeLevelDto</a>&nbsp;enquiryPrize(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                         <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/InstantTicket.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain中的类">InstantTicket</a>&nbsp;ticket,
                         boolean&nbsp;isWinnerCounted)
                           throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Enquiry the prize information of the given ticket.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>ticket</code> - The ig ticket.</dd><dd><code>isWinnerCounted</code> - Need to update the number of winner of this prize?? only validation will update it.</dd>
<dt><span class="strong">返回:</span></dt><dd>the prize information of given ticket.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code> - when encounter any business related exception.</dd></dl>
</li>
</ul>
<a name="offlineBatchValidate(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchPayoutDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offlineBatchValidate</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;offlineBatchValidate(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                                         <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchPayoutDto</a>&nbsp;req)
                                           throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Handle the batch upload of offline IG validation. Due to validation is performed offline, the backend can do
 nothing even the validation is failed, for example unmatched prize amount. The essential of this service is
 synchronize validation transactions to the backend, the backend will just record this validation transaction.
 <p/>
 The general logic flow will be as below:
 <ol>
 <li>Iterate on each validation in request.</li>
 <li>The backend calculates the prize amount according to the VIRN provided by request.</li>
 <li>If prize amount matches with the request:</li>
 <ol type="a">
 <li>If it is the first time this validation uploaded to the backend, simply record this validation.</li>
 <li>Else the backend will record this validation, and mark it as '2(dup&unmatched)' in response.</li>
 </ol>
 <li>If prize amount is unmatched with the request:</li>
 <ol>
 <li>If it is the first time this validation uploaded to the backend, then record it to DB, and marks it as
 '3(unmatched)' in response.</li>
 <li>Else the backend will record this validation, and marks it as '1(dup&unmatched)' in response.</li>
 </ol>
 </ol> Even fail to handle one validation, this service will continue to handle other one.
 <p/>
 <b>Pre-Condition</b>
 <p/>
 None
 <p/>
 <b>Post-Condition</b>
 <ol>
 <li>Each validation should be persisted at the backend, even prize amount is unmatched.</li>
 </ol>
 <b>Usage Restriction</b>
 <ul>
 <li>Authorization - No authorization necessary.</li>
 <li>Concurrent - There isn't any limitation on the number of concurrent accesses of this interface.</li>
 </ul>
 <b>Error Handling</b>
 <p/>
 None</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>ctx</code> - The transaction context.</dd><dd><code>req</code> - The request shiping offline IG validation. Refer to TE protocol document for information that which
            components of this argument are mandatory.</dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="partialPackage(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.ConfirmBatchPayoutDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>partialPackage</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ConfirmBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ConfirmBatchPayoutDto</a>&nbsp;partialPackage(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;response,
                                   <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/ConfirmBatchPayoutDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">ConfirmBatchPayoutDto</a>&nbsp;confirmBatchPayout)
                                     throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Complete each batch validation tansaction of a confiration batch.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="ConfirmBatchValidation(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchReportDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ConfirmBatchValidation</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;ConfirmBatchValidation(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;response,
                                           <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;dto)
                                             throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Users will submit all tickets uploaded by partial package transaction.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
<a name="getReportOfConfirmBatchValidation(com.mpos.lottery.te.port.Context, com.mpos.lottery.te.gameimpl.instantgame.domain.dto.InstantBatchReportDto)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getReportOfConfirmBatchValidation</h4>
<pre><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;getReportOfConfirmBatchValidation(<a href="../../../../../../../com/mpos/lottery/te/port/Context.html" title="com.mpos.lottery.te.port中的类">Context</a>&nbsp;ctx,
                                                      <a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/domain/dto/InstantBatchReportDto.html" title="com.mpos.lottery.te.gameimpl.instantgame.domain.dto中的类">InstantBatchReportDto</a>&nbsp;dto)
                                                        throws <a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></pre>
<div class="block">Query the batch upload success and failure votes and return Actual amount ,tax amount.</div>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="../../../../../../../com/mpos/lottery/te/config/exception/ApplicationException.html" title="com.mpos.lottery.te.config.exception中的类">ApplicationException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="跳过导航链接"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../com/mpos/lottery/te/gameimpl/instantgame/service/InstantOperatorService.html" title="com.mpos.lottery.te.gameimpl.instantgame.service中的接口"><span class="strong">上一个类</span></a></li>
<li>下一个类</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/mpos/lottery/te/gameimpl/instantgame/service/InstantTicketService.html" target="_top">框架</a></li>
<li><a href="InstantTicketService.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
