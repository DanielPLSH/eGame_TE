<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>IGPayoutDetailTempDaoImpl.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sourcecode</a> &gt; <a href="index.html" class="el_package">com.mpos.lottery.te.gameimpl.instantgame.dao.jpa</a> &gt; <span class="el_source">IGPayoutDetailTempDaoImpl.java</span></div><h1>IGPayoutDetailTempDaoImpl.java</h1><pre class="source lang-java linenums">package com.mpos.lottery.te.gameimpl.instantgame.dao.jpa;

import com.mpos.lottery.te.common.dao.BaseJpaDao;
import com.mpos.lottery.te.gameimpl.instantgame.dao.IGPayoutDetailTempDao;

<span class="fc" id="L6">public class IGPayoutDetailTempDaoImpl extends BaseJpaDao implements IGPayoutDetailTempDao {</span>

    @Override
    public void movePayoutDetailData(long batchNumber, String operatorId) {
        // TODO Auto-generated method stub

<span class="fc" id="L12">        String sql = &quot;insert into payout_detail(id, payout_id, total_amount, cash_amount, topup_amount, topup_mode, payout_type, bg_lucky_prize_object_id, bg_lucky_prize_object_name, create_time, create_by, update_time, update_by, object_num, object_type, object_num_per_level_item) select id, payout_id, total_amount, cash_amount, topup_amount, topup_mode, payout_type, bg_lucky_prize_object_id, bg_lucky_prize_object_name, create_time, create_by, update_time, update_by, object_num, object_type, object_num_per_level_item from ig_payout_detail_temp where operator_id=:operatorId and ig_batch_number=:iGBatchNumber&quot;;</span>
<span class="fc" id="L13">        int records = this.getEntityManager().createNativeQuery(sql).setParameter(&quot;operatorId&quot;, operatorId)</span>
                .setParameter(&quot;iGBatchNumber&quot;, batchNumber).executeUpdate();
<span class="fc" id="L15">        logger.info(&quot;moved &quot; + records + &quot; records under batch number(&quot; + batchNumber + &quot;) and operator id(&quot;</span>
                + operatorId + &quot;) from payout detail temp table.&quot;);

<span class="fc" id="L18">    }</span>

    @Override
    public void deleteDataByOperatorId(long batchNumber, String operatorId) {
<span class="fc" id="L22">        String sql = &quot;delete from ig_payout_detail_temp t where t.operator_id = :operatorId and t.ig_batch_number = :batchNumber&quot;;</span>
<span class="fc" id="L23">        int records = this.getEntityManager().createNativeQuery(sql).setParameter(&quot;operatorId&quot;, operatorId)</span>
                .setParameter(&quot;batchNumber&quot;, batchNumber).executeUpdate();
<span class="fc" id="L25">        logger.info(&quot;delete ig_payout_detail_temp of  &quot; + records + &quot; records under batchNumber(&quot; + batchNumber</span>
                + &quot;) operator id(&quot; + operatorId + &quot;) in ig_payout_detail_temp  table.&quot;);
<span class="fc" id="L27">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.2.201302030002</span></div></body></html>