<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Transaction.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sourcecode</a> &gt; <a href="index.html" class="el_package">com.mpos.lottery.te.trans.domain</a> &gt; <span class="el_source">Transaction.java</span></div><h1>Transaction.java</h1><pre class="source lang-java linenums">package com.mpos.lottery.te.trans.domain;

import com.mpos.lottery.te.common.dao.VersionEntity;
import com.mpos.lottery.te.gamespec.sale.BaseTicket;

import java.math.BigDecimal;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Table;
import javax.persistence.Transient;

@Entity
@Table(name = &quot;TE_TRANSACTION&quot;)
public class Transaction extends VersionEntity implements Cloneable {
    private static final long serialVersionUID = 4442383038683184008L;

    @Column(name = &quot;OPERATOR_ID&quot;)
    private String operatorId;

    @Column(name = &quot;GPE_ID&quot;)
    private String gpeId;

    @Column(name = &quot;DEV_ID&quot;)
    private long deviceId;

    @Column(name = &quot;MERCHANT_ID&quot;)
    private long merchantId;

    @Column(name = &quot;TYPE&quot;)
    private int type; // refer to TransaciontType

    @Column(name = &quot;TRACE_MESSAGE_ID&quot;)
    private String traceMessageId;

    @Column(name = &quot;TRANS_TIMESTAMP&quot;)
    private Date transTimestamp;

    @Column(name = &quot;RESPONSE_CODE&quot;)
    private int responseCode;

    @Column(name = &quot;TICKET_SERIAL_NO&quot;)
    private String ticketSerialNo;

    @Column(name = &quot;MERCHANTS&quot;)
    private String parentMerchants; // the parent merchants

    @Column(name = &quot;BATCH_NO&quot;)
    private String batchNumber;

    @Column(name = &quot;LONGTITUDE&quot;)
    private BigDecimal longitude;
    @Column(name = &quot;LATITUDE&quot;)
    private BigDecimal latitude;

    @Column(name = &quot;DESTINATION_OPEATOR&quot;)
    private String destinationOpeator;

    @Column(name = &quot;VIRN&quot;)
    private String virn;

    @Column(name = &quot;GAME_ID&quot;)
    private String gameId;

    /**
     * To a transaction which can be cancelled, such as sale, payout etc, this field means who cancelled it.
     * &lt;p/&gt;
     * However to a cancellation transaction itself, this field means which transaction has been cancelled by it.
     */
    @Column(name = &quot;CANCEL_TE_TRANSACTION_ID&quot;)
    private String cancelTransactionId;

    /**
     * To a transaction which can be cancelled, such as sale, payout etc, this field means the transaction type of
     * cancellation transaction.
     * &lt;p/&gt;
     * However to a cancellation transaction itself, this field means the transaction type of the transaction which
     * transaction has been cancelled by it.
     */
    @Column(name = &quot;CANCEL_TRANSACTION_TYPE&quot;)
    private Integer cancelTransactionType;

    /**
     * The total amount of transaction. To (multiple-draw)ticket, it is the sale/cancel total amount. To 'payout', it is
     * the total mount of payout(pay+return) after tax.
     */
<span class="fc" id="L88">    @Column(name = &quot;TOTAL_AMOUNT&quot;)</span>
    private BigDecimal totalAmount = new BigDecimal(&quot;0&quot;);

    // remove this association, or this association will always fetch
    // TransMessage eagerly, and
    // TransMessge maybe a big text.
    // @OneToOne(mappedBy=&quot;transaction&quot;,cascade={CascadeType.PERSIST,
    // CascadeType.REMOVE})
    @Transient
    private TransactionMessage transMessage;

    // use to generate response xml
    @Transient
    private BaseTicket ticket;

    @Transient
    private Object object;
    /**
     * Is the cancellation manual or auto? only affect when 'cancel by ticket'(201).
     */
    @Transient
    private boolean manualCancel;

    // @Column(name=&quot;SETTLEMENT_FLAG&quot;)
    @Transient
    private int settlementFlag;

<span class="fc" id="L115">    public Transaction() {</span>
<span class="fc" id="L116">    }</span>

    public Transaction(long deviceId, String traceMessageId) {
<span class="fc" id="L119">        super();</span>
<span class="fc" id="L120">        this.deviceId = deviceId;</span>
<span class="fc" id="L121">        this.traceMessageId = traceMessageId;</span>
<span class="fc" id="L122">    }</span>

    @Override
    public Object clone() {
        try {
<span class="fc" id="L127">            return super.clone();</span>
<span class="nc" id="L128">        } catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L129">            throw new RuntimeException(e);</span>
        }
    }

    public String getOperatorId() {
<span class="fc" id="L134">        return operatorId;</span>
    }

    public void setOperatorId(String operatorId) {
<span class="fc" id="L138">        this.operatorId = operatorId;</span>
<span class="fc" id="L139">    }</span>

    public String getGpeId() {
<span class="fc" id="L142">        return gpeId;</span>
    }

    public void setGpeId(String gpeId) {
<span class="fc" id="L146">        this.gpeId = gpeId;</span>
<span class="fc" id="L147">    }</span>

    public long getDeviceId() {
<span class="fc" id="L150">        return deviceId;</span>
    }

    public void setDeviceId(long deviceId) {
<span class="fc" id="L154">        this.deviceId = deviceId;</span>
<span class="fc" id="L155">    }</span>

    public long getMerchantId() {
<span class="fc" id="L158">        return merchantId;</span>
    }

    public void setMerchantId(long merchantId) {
<span class="fc" id="L162">        this.merchantId = merchantId;</span>
<span class="fc" id="L163">    }</span>

    public int getType() {
<span class="fc" id="L166">        return type;</span>
    }

    public void setType(int type) {
<span class="fc" id="L170">        this.type = type;</span>
<span class="fc" id="L171">    }</span>

    public String getTraceMessageId() {
<span class="fc" id="L174">        return traceMessageId;</span>
    }

    public void setTraceMessageId(String traceMessageId) {
<span class="fc" id="L178">        this.traceMessageId = traceMessageId;</span>
<span class="fc" id="L179">    }</span>

    public Date getTransTimestamp() {
<span class="fc" id="L182">        return transTimestamp;</span>
    }

    public void setTransTimestamp(Date transTimestamp) {
<span class="fc" id="L186">        this.transTimestamp = transTimestamp;</span>
<span class="fc" id="L187">    }</span>

    public int getResponseCode() {
<span class="fc" id="L190">        return responseCode;</span>
    }

    public void setResponseCode(int responseCode) {
<span class="fc" id="L194">        this.responseCode = responseCode;</span>
<span class="fc" id="L195">    }</span>

    public String getTicketSerialNo() {
<span class="fc" id="L198">        return ticketSerialNo;</span>
    }

    public void setTicketSerialNo(String ticketSerialNo) {
<span class="fc" id="L202">        this.ticketSerialNo = ticketSerialNo;</span>
<span class="fc" id="L203">    }</span>

    public TransactionMessage getTransMessage() {
<span class="fc" id="L206">        return transMessage;</span>
    }

    public void setTransMessage(TransactionMessage transMessage) {
<span class="fc" id="L210">        this.transMessage = transMessage;</span>
<span class="fc" id="L211">    }</span>

    public BaseTicket getTicket() {
<span class="fc" id="L214">        return ticket;</span>
    }

    public void setTicket(BaseTicket ticket) {
<span class="fc" id="L218">        this.ticket = ticket;</span>
<span class="fc" id="L219">    }</span>

    public String getParentMerchants() {
<span class="fc" id="L222">        return parentMerchants;</span>
    }

    public void setParentMerchants(String parentMerchants) {
<span class="fc" id="L226">        this.parentMerchants = parentMerchants;</span>
<span class="fc" id="L227">    }</span>

    public String getBatchNumber() {
<span class="fc" id="L230">        return batchNumber;</span>
    }

    public void setBatchNumber(String batchNumber) {
<span class="fc" id="L234">        this.batchNumber = batchNumber;</span>
<span class="fc" id="L235">    }</span>

    public int getSettlementFlag() {
<span class="fc" id="L238">        return settlementFlag;</span>
    }

    public void setSettlementFlag(int settlementFlag) {
<span class="fc" id="L242">        this.settlementFlag = settlementFlag;</span>
<span class="fc" id="L243">    }</span>

    public BigDecimal getTotalAmount() {
<span class="fc" id="L246">        return totalAmount;</span>
    }

    public void setTotalAmount(BigDecimal totalAmount) {
<span class="fc" id="L250">        this.totalAmount = totalAmount;</span>
<span class="fc" id="L251">    }</span>

    public String getVirn() {
<span class="fc" id="L254">        return virn;</span>
    }

    public void setVirn(String virn) {
<span class="fc" id="L258">        this.virn = virn;</span>
<span class="fc" id="L259">    }</span>

    public String getGameId() {
<span class="fc" id="L262">        return gameId;</span>
    }

    public void setGameId(String gameId) {
<span class="fc" id="L266">        this.gameId = gameId;</span>
<span class="fc" id="L267">    }</span>

    public BigDecimal getLongitude() {
<span class="fc" id="L270">        return longitude;</span>
    }

    public void setLongitude(BigDecimal longitude) {
<span class="fc" id="L274">        this.longitude = longitude;</span>
<span class="fc" id="L275">    }</span>

    public BigDecimal getLatitude() {
<span class="fc" id="L278">        return latitude;</span>
    }

    public void setLatitude(BigDecimal latitude) {
<span class="fc" id="L282">        this.latitude = latitude;</span>
<span class="fc" id="L283">    }</span>

    public String getDestinationOpeator() {
<span class="fc" id="L286">        return destinationOpeator;</span>
    }

    public void setDestinationOpeator(String destinationOpeator) {
<span class="nc" id="L290">        this.destinationOpeator = destinationOpeator;</span>
<span class="nc" id="L291">    }</span>

    public String getCancelTransactionId() {
<span class="fc" id="L294">        return cancelTransactionId;</span>
    }

    public void setCancelTransactionId(String cancelTransactionId) {
<span class="fc" id="L298">        this.cancelTransactionId = cancelTransactionId;</span>
<span class="fc" id="L299">    }</span>

    public Integer getCancelTransactionType() {
<span class="fc" id="L302">        return cancelTransactionType;</span>
    }

    public void setCancelTransactionType(Integer targetTransTypeOfCancel) {
<span class="fc" id="L306">        this.cancelTransactionType = targetTransTypeOfCancel;</span>
<span class="fc" id="L307">    }</span>

    public boolean isManualCancel() {
<span class="fc" id="L310">        return manualCancel;</span>
    }

    public void setManualCancel(boolean manualCancel) {
<span class="fc" id="L314">        this.manualCancel = manualCancel;</span>
<span class="fc" id="L315">    }</span>

    public Object getObject() {
<span class="fc" id="L318">        return object;</span>
    }

    public void setObject(Object object) {
<span class="fc" id="L322">        this.object = object;</span>
<span class="fc" id="L323">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.2.201302030002</span></div></body></html>