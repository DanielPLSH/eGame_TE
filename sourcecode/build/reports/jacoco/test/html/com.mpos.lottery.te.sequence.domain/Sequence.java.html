<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Sequence.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sourcecode</a> &gt; <a href="index.html" class="el_package">com.mpos.lottery.te.sequence.domain</a> &gt; <span class="el_source">Sequence.java</span></div><h1>Sequence.java</h1><pre class="source lang-java linenums">package com.mpos.lottery.te.sequence.domain;

import org.apache.commons.lang.builder.ReflectionToStringBuilder;

import java.math.BigInteger;

// @Entity(name=&quot;TE_SEQUENCE&quot;)
<span class="fc" id="L8">public class Sequence {</span>
<span class="fc" id="L9">    public static String MAX_SERIAL_NO = &quot;&quot;;</span>
<span class="fc" id="L10">    public static String MAX_TRANS_ID = &quot;&quot;;</span>

    public static final String NAME_TICKETSERIALNO = &quot;SEQ.SERIALNO&quot;;
    public static final String NAME_GENERAL = &quot;SEQ.GENERAL&quot;;
    public static final String NAME_REFERENCE_NO = &quot;SEQ.REFNO&quot;;

    // @Id
    // @Column(name=&quot;ID&quot;)
    private int id;

    // @Column(name=&quot;SEQ_NAME&quot;)
    private String name; // the name of sequence

    // @Column(name=&quot;MINVALUE&quot;)
    private BigInteger minValue;

    // @Column(name=&quot;MAXVALUE&quot;)
    private BigInteger maxValue;

    // @Column(name=&quot;INTERVAL&quot;)
    private BigInteger interval;

    // @Column(name=&quot;NEXTMIN&quot;)
    private BigInteger nextMin;

    // nextMax = nextMin + interval - 1;
    // @Column(name=&quot;NEXTMAX&quot;)
    private BigInteger nextMax;

    // @Column(name=&quot;ISCYCLE&quot;)
    private boolean isCycle;

    // @Transient
    private BigInteger currentValue;

    public int getId() {
<span class="fc" id="L46">        return id;</span>
    }

    public void setId(int id) {
<span class="fc" id="L50">        this.id = id;</span>
<span class="fc" id="L51">    }</span>

    public BigInteger getMaxValue() {
<span class="fc" id="L54">        return maxValue;</span>
    }

    public void setMaxValue(BigInteger maxValue) {
<span class="fc" id="L58">        this.maxValue = maxValue;</span>
        // this.setNextMax(maxValue);
<span class="fc" id="L60">    }</span>

    public BigInteger getMinValue() {
<span class="fc" id="L63">        return minValue;</span>
    }

    public void setMinValue(BigInteger minValue) {
<span class="fc" id="L67">        this.minValue = minValue;</span>
        // this.setNextMin(minValue);
<span class="fc" id="L69">    }</span>

    public BigInteger getInterval() {
<span class="fc" id="L72">        return interval;</span>
    }

    public void setInterval(BigInteger interval) {
<span class="fc" id="L76">        this.interval = interval;</span>
<span class="fc" id="L77">    }</span>

    public BigInteger getNextMin() {
<span class="fc" id="L80">        return nextMin;</span>
    }

    public void setNextMin(BigInteger nextMin) {
<span class="fc" id="L84">        this.nextMin = nextMin;</span>
<span class="fc" id="L85">    }</span>

    public BigInteger getNextMax() {
<span class="fc" id="L88">        return nextMax;</span>
    }

    public void setNextMax(BigInteger nextMax) {
<span class="fc" id="L92">        this.nextMax = nextMax;</span>
<span class="fc" id="L93">    }</span>

    public boolean isCycle() {
<span class="fc" id="L96">        return isCycle;</span>
    }

    public void setCycle(boolean isCycle) {
<span class="fc" id="L100">        this.isCycle = isCycle;</span>
<span class="fc" id="L101">    }</span>

    public String getName() {
<span class="fc" id="L104">        return name;</span>
    }

    public void setName(String name) {
<span class="fc" id="L108">        this.name = name;</span>
<span class="fc" id="L109">    }</span>

    /**
     * Get the current sequence value. if nextMin=1,nextMax=3,then 1,2,3 will be returned. if (nextMin == nextMax), then
     * only 1 sequence will be returned.
     * 
     * @return a sequence, or null if current value has reached the end of sequence range.
     */
    public BigInteger getCurrentValue() {
<span class="fc bfc" id="L118" title="All 2 branches covered.">        if (currentValue == null) {</span>
<span class="fc" id="L119">            currentValue = nextMin.subtract(BigInteger.ONE);</span>
        }
<span class="fc" id="L121">        currentValue = currentValue.add(BigInteger.ONE);</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">        if (currentValue.compareTo(this.nextMax) &gt; 0) {</span>
<span class="fc" id="L123">            return null;</span>
        }
<span class="fc" id="L125">        return currentValue;</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L130">        return ReflectionToStringBuilder.toString(this);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.2.201302030002</span></div></body></html>