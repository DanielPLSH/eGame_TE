<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - Class com.mpos.lottery.te.gameimpl.union.sale.UnionMannualCancellationIntegrationTest</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class com.mpos.lottery.te.gameimpl.union.sale.UnionMannualCancellationIntegrationTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.mpos.lottery.te.gameimpl.union.sale.html">com.mpos.lottery.te.gameimpl.union.sale</a> &gt; UnionMannualCancellationIntegrationTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">4</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">0.538s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testCancel_GameInstance_Disable</td>
<td>0.111s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCancel_Game_Disable</td>
<td>0.135s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCancel_OK</td>
<td>0.175s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCancel_RemovedOperator</td>
<td>0.117s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>[2015-05-29 17:13:43,644][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:43,644][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:43,644][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@7464e6ed) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:43,644][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:43,645][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,645][Test worker][INFO ][BaseTransactionalIntegrationTest] | UnionMannualCancellationIntegrationTest.testCancel_RemovedOperator                                                     |
[2015-05-29 17:13:43,645][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,645][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,646][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Req.xml).
[2015-05-29 17:13:43,646][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823645|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-515846812), get digest:e5fbf09d6a8c4e6e99ad2fa366b9f88e
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823645).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=e5fbf09d6a8c4e6e99ad2fa366b9f88e).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,646][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,647][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,648][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9pDpTDScnIWI62pEFB0SGtKkhmSVtwRhObbaRtENvsKgd1vgEj9cakrUbLVxBSMJqciae7U9vnZ9gkPZ+TiqwdSqZt3Q2CcK5Tpzhe/Zfjrl953surZx81pp6iV9IdyhJyvIjV3HMgac/ebWKRzVcP44FSAnRHgSGMdYo6YjPl/9ShLytd5dNEovh0Ieu0fIo26JFl7zXiemQCd/9Khfav5+GkGikzTTQUYjHCgQfTvcg0sjhq22khXwGwZsECT/xphbQuQbhitT1lYyKNDcke0pjV/yGQ6smzhPkwgiAd1iSvwEPDkcCRIN0CC4mjcj8EFhDXSj+tlk=.
[2015-05-29 17:13:43,648][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823645|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,648][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,648][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823645|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-515846812), get digest:e5fbf09d6a8c4e6e99ad2fa366b9f88e
[2015-05-29 17:13:43,648][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,648][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/SellTicket_Req.xml
[2015-05-29 17:13:43,649][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,664][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_1.5.0).
[2015-05-29 17:13:43,664][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_).
[2015-05-29 17:13:43,664][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_200_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:43,672][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.union.game.UnionGameInstance) by(number=20090408,gameId=GAME-UNION-111, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:43,677][Test worker][DEBUG][AbstractGameInstanceService] Use channel game instance time definition(IGPE-1).
[2015-05-29 17:13:43,677][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745819300018664
[2015-05-29 17:13:43,684][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:43,684][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gamespec.sale.support.validator.SingleSelectedNumberValidator@1d52f58f) for bet option:1
[2015-05-29 17:13:43,685][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gameimpl.union.sale.support.UnionMultipleSelectedNumberValidator@31778e53) for bet option:2
[2015-05-29 17:13:43,697][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,697][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:43,697][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199998400, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,706][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.8]: transaction {
  id: &quot;0115052900000000002076&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890823000
  trans_type: 200
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}
multi_draw: 2
total_amount: &quot;1600&quot;
serial_no: &quot;aHhDkgTyIu5KJp+fo6FS8nek/uy9aOBr&quot;
game_instance {
  id: &quot;GII-113&quot;
}
entries {
  selected_number: &quot;1,2,3,6,7,13-2,5&quot;
  bet_option: 1
  total_bets: 1
  entry_amount: &quot;100&quot;
  input_channel: &quot;1&quot;
}
entries {
  selected_number: &quot;3,11,14,16,22,25,36-2,4&quot;
  bet_option: 2
  total_bets: 7
  entry_amount: &quot;700&quot;
  input_channel: &quot;1&quot;
}

[2015-05-29 17:13:43,706][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:43,707][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,707][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.union.sale.UnionTicket),mappingFile=xml-mapping/game/union/SellTicket_Res.xml
[2015-05-29 17:13:43,707][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,707][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Res.xml).
[2015-05-29 17:13:43,708][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823645|Timestamp:20150529171343|Transaction-Type:4200|Transaction-Id:0115052900000000002076|Response-Code:200|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018664&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjS9iEm41Rqc4=&quot; validationCode=&quot;064440&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;):3a99924d3c5a9c6075b46b7e74671f2e
[2015-05-29 17:13:43,708][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=704) succesfully.
[2015-05-29 17:13:43,708][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=704): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018664&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjS9iEm41Rqc4=&quot; validationCode=&quot;064440&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,708][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,716][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,727][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/CancelTicket_Req.xml).
[2015-05-29 17:13:43,727][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823716|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018664&quot; isMannul=&quot;1&quot;/&gt;,hash=-581076623), get digest:cb95f91f9b815fd3c9d07266f9a294b8
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823716).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=cb95f91f9b815fd3c9d07266f9a294b8).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,728][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,730][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTlE1AblPg/WLLQmKKFpg0ce9rZrxVE41T+hMjCL7zBei.
[2015-05-29 17:13:43,730][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823716|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,730][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018664&quot; isMannul=&quot;1&quot;/&gt;
[2015-05-29 17:13:43,730][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823716|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018664&quot; isMannul=&quot;1&quot;/&gt;,hash=-581076623), get digest:cb95f91f9b815fd3c9d07266f9a294b8
[2015-05-29 17:13:43,730][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,730][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/CancelTicket_Req.xml
[2015-05-29 17:13:43,730][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,742][Test worker][ERROR][TEPortServlet] operator(id=OPERATOR-111) is not active.
com.mpos.lottery.te.config.exception.ApplicationException: operator(id=OPERATOR-111) is not active.
	at com.mpos.lottery.te.port.service.CommonFacadeService.checkOperatorMerchant(CommonFacadeService.java:304)
	at com.mpos.lottery.te.port.service.CommonFacadeService.facade(CommonFacadeService.java:88)
	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy85.facade(Unknown Source)
	at com.mpos.lottery.te.port.TEPortServlet.doPost(TEPortServlet.java:121)
	at com.mpos.lottery.te.test.integration.BaseServletIntegrationTest.doPost(BaseServletIntegrationTest.java:80)
	at com.mpos.lottery.te.gameimpl.union.sale.UnionMannualCancellationIntegrationTest.testCancel_RemovedOperator(UnionMannualCancellationIntegrationTest.java:101)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)
	at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[2015-05-29 17:13:43,743][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823716|Timestamp:20150529171343|Transaction-Type:4201|Transaction-Id:|Response-Code:224|):2d084a9c175642a73bd669e73fbcd46d
[2015-05-29 17:13:43,743][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=224,length=0): 
[2015-05-29 17:13:43,758][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:43,758][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:43,758][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@52d57cde) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:43,759][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:43,759][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,759][Test worker][INFO ][BaseTransactionalIntegrationTest] | UnionMannualCancellationIntegrationTest.testCancel_Game_Disable                                                        |
[2015-05-29 17:13:43,759][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,763][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,764][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Req.xml).
[2015-05-29 17:13:43,764][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823763|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-627527775), get digest:4b10d3bb6f7dacec6ed33ad7c3c936cf
[2015-05-29 17:13:43,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:43,764][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823763).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=4b10d3bb6f7dacec6ed33ad7c3c936cf).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,765][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,768][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9pDpTDScnIWI62pEFB0SGtKkhmSVtwRhObbaRtENvsKgd1vgEj9cakrUbLVxBSMJqciae7U9vnZ9gkPZ+TiqwdSqZt3Q2CcK5Tpzhe/Zfjrl953surZx81pp6iV9IdyhJyvIjV3HMgac/ebWKRzVcP44FSAnRHgSGMdYo6YjPl/9ShLytd5dNEovh0Ieu0fIo26JFl7zXiemQCd/9Khfav5+GkGikzTTQUYjHCgQfTvcg0sjhq22khXwGwZsECT/xphbQuQbhitT1lYyKNDcke0pjV/yGQ6smzhPkwgiAd1iSvwEPDkcCRIN0CC4mjcj8EFhDXSj+tlk=.
[2015-05-29 17:13:43,768][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823763|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,768][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,769][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823763|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-627527775), get digest:4b10d3bb6f7dacec6ed33ad7c3c936cf
[2015-05-29 17:13:43,769][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,769][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/SellTicket_Req.xml
[2015-05-29 17:13:43,769][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,793][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_1.5.0).
[2015-05-29 17:13:43,793][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_).
[2015-05-29 17:13:43,793][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_200_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:43,800][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.union.game.UnionGameInstance) by(number=20090408,gameId=GAME-UNION-111, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:43,805][Test worker][DEBUG][AbstractGameInstanceService] Use channel game instance time definition(IGPE-1).
[2015-05-29 17:13:43,805][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745819300018761
[2015-05-29 17:13:43,814][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:43,814][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gamespec.sale.support.validator.SingleSelectedNumberValidator@7cc80f50) for bet option:1
[2015-05-29 17:13:43,814][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gameimpl.union.sale.support.UnionMultipleSelectedNumberValidator@32658d30) for bet option:2
[2015-05-29 17:13:43,833][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,833][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:43,833][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199998400, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,843][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.8]: transaction {
  id: &quot;0115052900000000002081&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890823000
  trans_type: 200
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}
multi_draw: 2
total_amount: &quot;1600&quot;
serial_no: &quot;aHhDkgTyIu5KJp+fo6FS8rToJUEbHdc+&quot;
game_instance {
  id: &quot;GII-113&quot;
}
entries {
  selected_number: &quot;1,2,3,6,7,13-2,5&quot;
  bet_option: 1
  total_bets: 1
  entry_amount: &quot;100&quot;
  input_channel: &quot;1&quot;
}
entries {
  selected_number: &quot;3,11,14,16,22,25,36-2,4&quot;
  bet_option: 2
  total_bets: 7
  entry_amount: &quot;700&quot;
  input_channel: &quot;1&quot;
}

[2015-05-29 17:13:43,844][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:43,844][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,844][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.union.sale.UnionTicket),mappingFile=xml-mapping/game/union/SellTicket_Res.xml
[2015-05-29 17:13:43,844][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,845][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Res.xml).
[2015-05-29 17:13:43,845][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823763|Timestamp:20150529171343|Transaction-Type:4200|Transaction-Id:0115052900000000002081|Response-Code:200|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018761&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjzxiaX0po/Bk=&quot; validationCode=&quot;135180&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;):3e45e20a272eb60ebbfa900cd5952379
[2015-05-29 17:13:43,846][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=704) succesfully.
[2015-05-29 17:13:43,846][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=704): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018761&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjzxiaX0po/Bk=&quot; validationCode=&quot;135180&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,846][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,853][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,854][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/CancelTicket_Req.xml).
[2015-05-29 17:13:43,854][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823853|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018761&quot; isMannul=&quot;1&quot;/&gt;,hash=1501641909), get digest:3270abacde28c935b4624556090027f0
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823853).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=3270abacde28c935b4624556090027f0).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,855][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTlE1AblPg/WLP2A3IFpyWx0Z3Khckmt8iLxHy6lgd/3j.
[2015-05-29 17:13:43,855][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823853|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,856][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018761&quot; isMannul=&quot;1&quot;/&gt;
[2015-05-29 17:13:43,856][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823853|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018761&quot; isMannul=&quot;1&quot;/&gt;,hash=1501641909), get digest:3270abacde28c935b4624556090027f0
[2015-05-29 17:13:43,856][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,856][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/CancelTicket_Req.xml
[2015-05-29 17:13:43,856][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,865][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_1.5.0).
[2015-05-29 17:13:43,865][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_).
[2015-05-29 17:13:43,865][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_201_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:43,870][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.union.sale.service.UnionTicketServiceImpl) to cancel transaction(gameType=8,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:43,874][Test worker][ERROR][TEPortServlet] No manual cancellation allowed of game (gameId=GAME-UNION-111).
com.mpos.lottery.te.config.exception.ApplicationException: No manual cancellation allowed of game (gameId=GAME-UNION-111).
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.allowManualCancellation(AbstractTicketService.java:376)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelByTicket(AbstractTicketService.java:217)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelOrReverse(AbstractTicketService.java:283)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:203)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:227)
	at sun.reflect.GeneratedMethodAccessor288.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy55.reverseOrCancel(Unknown Source)
	at com.mpos.lottery.te.gameimpl.union.UnionController.cancelByTicket(UnionController.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.mpos.lottery.common.router.RoutineRegistry.route(RoutineRegistry.java:57)
	at com.mpos.lottery.te.port.service.CommonFacadeService.routeRequest(CommonFacadeService.java:237)
	at com.mpos.lottery.te.port.service.CommonFacadeService.facade(CommonFacadeService.java:96)
	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy85.facade(Unknown Source)
	at com.mpos.lottery.te.port.TEPortServlet.doPost(TEPortServlet.java:121)
	at com.mpos.lottery.te.test.integration.BaseServletIntegrationTest.doPost(BaseServletIntegrationTest.java:80)
	at com.mpos.lottery.te.gameimpl.union.sale.UnionMannualCancellationIntegrationTest.testCancel_Game_Disable(UnionMannualCancellationIntegrationTest.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)
	at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[2015-05-29 17:13:43,875][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823853|Timestamp:20150529171343|Transaction-Type:4201|Transaction-Id:0115052900000000002086|Response-Code:261|):d710ad9b9838852c2ea80aca6e7703e7
[2015-05-29 17:13:43,877][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=261,length=0): 
[2015-05-29 17:13:43,891][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:43,891][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:43,891][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@1e072395) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:43,892][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:43,892][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,892][Test worker][INFO ][BaseTransactionalIntegrationTest] | UnionMannualCancellationIntegrationTest.testCancel_OK                                                                  |
[2015-05-29 17:13:43,892][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:43,892][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,893][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Req.xml).
[2015-05-29 17:13:43,893][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823892|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-1663960578), get digest:6444dbc280bf12661d457fc771dce815
[2015-05-29 17:13:43,893][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:43,893][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823892).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=6444dbc280bf12661d457fc771dce815).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,894][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,898][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9pDpTDScnIWI62pEFB0SGtKkhmSVtwRhObbaRtENvsKgd1vgEj9cakrUbLVxBSMJqciae7U9vnZ9gkPZ+TiqwdSqZt3Q2CcK5Tpzhe/Zfjrl953surZx81pp6iV9IdyhJyvIjV3HMgac/ebWKRzVcP44FSAnRHgSGMdYo6YjPl/9ShLytd5dNEovh0Ieu0fIo26JFl7zXiemQCd/9Khfav5+GkGikzTTQUYjHCgQfTvcg0sjhq22khXwGwZsECT/xphbQuQbhitT1lYyKNDcke0pjV/yGQ6smzhPkwgiAd1iSvwEPDkcCRIN0CC4mjcj8EFhDXSj+tlk=.
[2015-05-29 17:13:43,898][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823892|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,899][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,899][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823892|Timestamp:20150529171343|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-1663960578), get digest:6444dbc280bf12661d457fc771dce815
[2015-05-29 17:13:43,899][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,899][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/SellTicket_Req.xml
[2015-05-29 17:13:43,899][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:43,914][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_1.5.0).
[2015-05-29 17:13:43,914][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_).
[2015-05-29 17:13:43,914][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_200_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:43,921][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.union.game.UnionGameInstance) by(number=20090408,gameId=GAME-UNION-111, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:43,926][Test worker][DEBUG][AbstractGameInstanceService] Use channel game instance time definition(IGPE-1).
[2015-05-29 17:13:43,926][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745819300018876
[2015-05-29 17:13:43,933][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:43,933][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gamespec.sale.support.validator.SingleSelectedNumberValidator@1c050071) for bet option:1
[2015-05-29 17:13:43,933][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gameimpl.union.sale.support.UnionMultipleSelectedNumberValidator@c600916) for bet option:2
[2015-05-29 17:13:43,946][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,946][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:43,946][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199998400, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:43,966][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.8]: transaction {
  id: &quot;0115052900000000002087&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890823000
  trans_type: 200
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}
multi_draw: 2
total_amount: &quot;1600&quot;
serial_no: &quot;aHhDkgTyIu5KJp+fo6FS8tvZDOiKZwVR&quot;
game_instance {
  id: &quot;GII-113&quot;
}
entries {
  selected_number: &quot;1,2,3,6,7,13-2,5&quot;
  bet_option: 1
  total_bets: 1
  entry_amount: &quot;100&quot;
  input_channel: &quot;1&quot;
}
entries {
  selected_number: &quot;3,11,14,16,22,25,36-2,4&quot;
  bet_option: 2
  total_bets: 7
  entry_amount: &quot;700&quot;
  input_channel: &quot;1&quot;
}

[2015-05-29 17:13:43,967][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:43,967][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,967][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.union.sale.UnionTicket),mappingFile=xml-mapping/game/union/SellTicket_Res.xml
[2015-05-29 17:13:43,967][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,968][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Res.xml).
[2015-05-29 17:13:43,968][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823892|Timestamp:20150529171343|Transaction-Type:4200|Transaction-Id:0115052900000000002087|Response-Code:200|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018876&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjzlE2gXSq3I0=&quot; validationCode=&quot;734574&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;):60736cbf9bfc44621304ac0c4855d474
[2015-05-29 17:13:43,969][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=704) succesfully.
[2015-05-29 17:13:43,969][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=704): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018876&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6VjzlE2gXSq3I0=&quot; validationCode=&quot;734574&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:43,969][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:43,979][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,979][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/CancelTicket_Req.xml).
[2015-05-29 17:13:43,979][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823979|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018876&quot; isMannul=&quot;1&quot;/&gt;,hash=-1861635723), get digest:90311bfc1fbb2e5722efd7f2583992a5
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171343).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890823979).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=90311bfc1fbb2e5722efd7f2583992a5).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:43,980][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:43,983][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTlE1AblPg/WLGcsfM43rb4qyuxsItNRXXG1XTcAQqryB.
[2015-05-29 17:13:43,983][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823979|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:43,983][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018876&quot; isMannul=&quot;1&quot;/&gt;
[2015-05-29 17:13:43,983][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823979|Timestamp:20150529171343|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018876&quot; isMannul=&quot;1&quot;/&gt;,hash=-1861635723), get digest:90311bfc1fbb2e5722efd7f2583992a5
[2015-05-29 17:13:43,983][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:43,983][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/CancelTicket_Req.xml
[2015-05-29 17:13:43,983][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:44,008][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_1.5.0).
[2015-05-29 17:13:44,008][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_).
[2015-05-29 17:13:44,008][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_201_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:44,017][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.union.sale.service.UnionTicketServiceImpl) to cancel transaction(gameType=8,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:44,040][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199998400, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:44,040][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:44,040][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:44,051][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.CANCEL.200.8]: origTrans {
  id: &quot;0115052900000000002087&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890823000
  trans_type: 200
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}
cancelTrans {
  id: &quot;0115052900000000002092&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890823000
  trans_type: 210
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}

[2015-05-29 17:13:44,051][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:44,051][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890823979|Timestamp:20150529171343|Transaction-Type:4201|Transaction-Id:0115052900000000002092|Response-Code:200|):803702205ef4e9c8c2ea0edcc693d388
[2015-05-29 17:13:44,051][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=0): 
[2015-05-29 17:13:44,066][Test worker][DEBUG][TEPortServlet] Startup job scheduer(org.quartz.impl.StdScheduler@4d1e5820) successfully.
[2015-05-29 17:13:44,067][Test worker][WARN ][TEPortServlet] can NOT find META file:F:\project\M.Lottery\TE\TRUNK_TE\sourcecode\build\classes\main\META-INF\MANIFEST.MF
[2015-05-29 17:13:44,067][Test worker][DEBUG][TEPortServlet] Register MBean(com.mpos.lottery.te.common.jmx.TransactionTimeout@1e20b0f) with name(com.mpos.lottery.te:type=TransactionTimeoutMBean) successfully.
[2015-05-29 17:13:44,067][Test worker][DEBUG][BaseTransactionalIntegrationTest] Retrieve a ApplicationContext(org.springframework.web.context.support.GenericWebApplicationContext@34f645a8: startup date [Fri May 29 17:12:38 CST 2015]; root of context hierarchy).
[2015-05-29 17:13:44,067][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:44,067][Test worker][INFO ][BaseTransactionalIntegrationTest] | UnionMannualCancellationIntegrationTest.testCancel_GameInstance_Disable                                                |
[2015-05-29 17:13:44,067][Test worker][INFO ][BaseTransactionalIntegrationTest] +------------------------------------------------------------------------------------------------------------------------+
[2015-05-29 17:13:44,069][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:44,069][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Req.xml).
[2015-05-29 17:13:44,070][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824069|Timestamp:20150529171344|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-890629922), get digest:1519762284446c35064c1183709b64f3
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=200).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171344).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890824069).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=1519762284446c35064c1183709b64f3).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:44,070][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:44,072][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6vvj1C28m6E+ybhcq2GHfncNCEmxnE1Ou0qcmJ+qutg9pDpTDScnIWI62pEFB0SGtKkhmSVtwRhObbaRtENvsKgd1vgEj9cakrUbLVxBSMJqciae7U9vnZ9gkPZ+TiqwdSqZt3Q2CcK5Tpzhe/Zfjrl953surZx81pp6iV9IdyhJyvIjV3HMgac/ebWKRzVcP44FSAnRHgSGMdYo6YjPl/9ShLytd5dNEovh0Ieu0fIo26JFl7zXiemQCd/9Khfav5+GkGikzTTQUYjHCgQfTvcg0sjhq22khXwGwZsECT/xphbQuQbhitT1lYyKNDcke0pjV/yGQ6smzhPkwgiAd1iSvwEPDkcCRIN0CC4mjcj8EFhDXSj+tlk=.
[2015-05-29 17:13:44,072][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824069|Timestamp:20150529171344|Transaction-Type:200|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:44,072][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:44,072][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824069|Timestamp:20150529171344|Transaction-Type:200|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket multipleDraws=&quot;2&quot; totalAmount=&quot;1600&quot; PIN=&quot;123456&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot;/&gt;&lt;/Ticket&gt;,hash=-890629922), get digest:1519762284446c35064c1183709b64f3
[2015-05-29 17:13:44,072][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:44,072][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/SellTicket_Req.xml
[2015-05-29 17:13:44,072][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Req.xml) by key(8.transtype.200).
[2015-05-29 17:13:44,084][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_1.5.0).
[2015-05-29 17:13:44,084][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_200_).
[2015-05-29 17:13:44,084][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_200_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.sell(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:44,090][Test worker][DEBUG][BaseJpaDao] Query future game instance(class com.mpos.lottery.te.gameimpl.union.game.UnionGameInstance) by(number=20090408,gameId=GAME-UNION-111, multipleDraws=2, state=1||2):1
[2015-05-29 17:13:44,096][Test worker][DEBUG][AbstractGameInstanceService] Use channel game instance time definition(IGPE-1).
[2015-05-29 17:13:44,096][Test worker][DEBUG][UUIDServiceImpl] Assemble a new ticket serial number:01110745819300018954
[2015-05-29 17:13:44,109][Test worker][DEBUG][DefaultTicketValidator] THe max allowed multi-draw of operation parameter is 10, merchant limit to 3, the smaller 3 will be used.
[2015-05-29 17:13:44,109][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gamespec.sale.support.validator.SingleSelectedNumberValidator@2e294a12) for bet option:1
[2015-05-29 17:13:44,109][Test worker][DEBUG][UnionSelectedNumberValidatorFactory] Found ticket validator(com.mpos.lottery.te.gameimpl.union.sale.support.UnionMultipleSelectedNumberValidator@18bdfb6b) for bet option:2
[2015-05-29 17:13:44,122][Test worker][DEBUG][DefaultBalanceService] Operator before transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=200000000, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:44,122][Test worker][DEBUG][DefaultBalanceService] Found balance strategy:com.mpos.lottery.te.merchant.service.balance.SaleBalanceStrategy@e1f8aba
[2015-05-29 17:13:44,122][Test worker][DEBUG][DefaultBalanceService] Operator after transaction -  Operator [id=OPERATOR-111, loginName=OPERATOR-LOGIN, creditType=1, saleCreditLevel=199998400, payoutCreditLevel=1000, cashoutBalance=0, commisionBalance=0]
[2015-05-29 17:13:44,136][Test worker][DEBUG][CommonFacadeService] Prepare to publish message to exchange[TE.200] with routing key[TE.200.8]: transaction {
  id: &quot;0115052900000000002093&quot;
  dev_id: &quot;111&quot;
  operator_id: &quot;OPERATOR-111&quot;
  merchant_id: &quot;111&quot;
  create_time: 1432890824000
  trans_type: 200
  game_id: &quot;GAME-UNION-111&quot;
  game_type: 8
  total_amount: &quot;1600&quot;
}
multi_draw: 2
total_amount: &quot;1600&quot;
serial_no: &quot;aHhDkgTyIu5KJp+fo6FS8m2jecDFyWpL&quot;
game_instance {
  id: &quot;GII-113&quot;
}
entries {
  selected_number: &quot;1,2,3,6,7,13-2,5&quot;
  bet_option: 1
  total_bets: 1
  entry_amount: &quot;100&quot;
  input_channel: &quot;1&quot;
}
entries {
  selected_number: &quot;3,11,14,16,22,25,36-2,4&quot;
  bet_option: 2
  total_bets: 7
  entry_amount: &quot;700&quot;
  input_channel: &quot;1&quot;
}

[2015-05-29 17:13:44,137][Test worker][DEBUG][CommonFacadeService] Publish message successfully
[2015-05-29 17:13:44,137][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:44,137][Test worker][DEBUG][ProtocolSerializer] Start to serialize model(class com.mpos.lottery.te.gameimpl.union.sale.UnionTicket),mappingFile=xml-mapping/game/union/SellTicket_Res.xml
[2015-05-29 17:13:44,137][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:44,138][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/SellTicket_Res.xml).
[2015-05-29 17:13:44,138][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824069|Timestamp:20150529171344|Transaction-Type:4200|Transaction-Id:0115052900000000002093|Response-Code:200|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018954&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6Vj5EsjkXGrnfM=&quot; validationCode=&quot;651320&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;):382ba6e963015a116911be0a17ad980b
[2015-05-29 17:13:44,138][Test worker][DEBUG][TEPortServlet] Write response to client(host1=localhost,sizeOfPack=704) succesfully.
[2015-05-29 17:13:44,138][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=200,length=704): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018954&quot; type=&quot;1&quot; lastDrawNo=&quot;20090416&quot; barcode=&quot;08cK/u9hwZY2Rogq4k24Oeg4G3HSlAl9EbjLdf+UJJlt8eRiXxElYKck5kS9M7H6Vj5EsjkXGrnfM=&quot; validationCode=&quot;651320&quot; multipleDraws=&quot;2&quot; totalBets=&quot;16&quot; totalAmount=&quot;1600&quot;&gt;&lt;GameDraw number=&quot;20090408&quot; gameId=&quot;GAME-UNION-111&quot;/&gt;&lt;Entry selectedNumber=&quot;1,2,3,6,7,13-2,5&quot; betOption=&quot;1&quot; inputChannel=&quot;1&quot; entryAmount=&quot;100&quot;/&gt;&lt;Entry selectedNumber=&quot;3,11,14,16,22,25,36-2,4&quot; betOption=&quot;2&quot; inputChannel=&quot;1&quot; entryAmount=&quot;700&quot;/&gt;&lt;/Ticket&gt;
[2015-05-29 17:13:44,139][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/SellTicket_Res.xml) by key(8.transtype.4200).
[2015-05-29 17:13:44,144][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:44,145][Test worker][DEBUG][CastorHelper] Finish marshaling input(typeclass com.mpos.lottery.te.gameimpl.union.sale.UnionTicket, mappingFile=xml-mapping/game/union/CancelTicket_Req.xml).
[2015-05-29 17:13:44,145][Test worker][DEBUG][BaseServletIntegrationTest] Do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824144|Timestamp:20150529171344|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018954&quot; isMannul=&quot;1&quot;/&gt;,hash=-785541214), get digest:c6a493593d261abc2441ddb98ab9ded1
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Transaction-Type, value=201).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Protocal-Version, value=1.5).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Timestamp, value=20150529171344).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPE-Id, value=GPE-111).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trace-Message-Id, value=1432890824144).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Operator-Id, value=OPERATOR-111).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Terminal-Id, value=111).
[2015-05-29 17:13:44,145][Test worker][DEBUG][TEPortServlet] Got request header(name=X-MAC, value=c6a493593d261abc2441ddb98ab9ded1).
[2015-05-29 17:13:44,146][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Game-Type-Id, value=8).
[2015-05-29 17:13:44,146][Test worker][DEBUG][TEPortServlet] Got request header(name=X-Trans-BatchNumber, value=20150529).
[2015-05-29 17:13:44,146][Test worker][DEBUG][TEPortServlet] Got request header(name=X-GPS-Location, value=40.714353,-74.005973).
[2015-05-29 17:13:44,146][Test worker][DEBUG][TEPortServlet] Got request from localhost, and the message body is:pq3FqO8HCcAnaobA+xpVnADmrnwj1vrK59BGhqvtskYFWTsa2cbe6ttFDFcpmi1MamgAomcAmY7eTM16XgcUTlE1AblPg/WLSBNzwIyXNHvxzbrDt0CsV1Ex66z3ne4m.
[2015-05-29 17:13:44,146][Test worker][DEBUG][ProtocolSerializer] Start to deserialize request context(Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824144|Timestamp:20150529171344|Transaction-Type:201|Transaction-Id:|Response-Code:|).
[2015-05-29 17:13:44,146][Test worker][DEBUG][ProtocolSerializer] Finish decrypting cipher into original xml:&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018954&quot; isMannul=&quot;1&quot;/&gt;
[2015-05-29 17:13:44,146][Test worker][DEBUG][ProtocolSerializer] Start to do MAC(key=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF) on (Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824144|Timestamp:20150529171344|Transaction-Type:201|Transaction-Id:|Response-Code:|&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Ticket serialNo=&quot;01110745819300018954&quot; isMannul=&quot;1&quot;/&gt;,hash=-785541214), get digest:c6a493593d261abc2441ddb98ab9ded1
[2015-05-29 17:13:44,146][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:44,146][Test worker][DEBUG][ProtocolSerializer] Start to deserialize model: model=null,mappingFile=xml-mapping/game/union/CancelTicket_Req.xml
[2015-05-29 17:13:44,146][Test worker][DEBUG][MLotteryContext] find mapping file definition(xml-mapping/game/union/CancelTicket_Req.xml) by key(8.transtype.201).
[2015-05-29 17:13:44,156][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_1.5.0).
[2015-05-29 17:13:44,156][Test worker][DEBUG][RoutineRegistry] Try to lookup handler by routine key(8_201_).
[2015-05-29 17:13:44,156][Test worker][DEBUG][RoutineRegistry] Lookup controller by key(8_201_), found controller(com.mpos.lottery.te.gameimpl.union.UnionController@f81b221) and method(public void com.mpos.lottery.te.gameimpl.union.UnionController.cancelByTicket(com.mpos.lottery.te.port.Context,com.mpos.lottery.te.port.Context) throws com.mpos.lottery.te.config.exception.ApplicationException).
[2015-05-29 17:13:44,162][Test worker][DEBUG][ReversalOrCancelStrategyFactory] Found ReversalStrategy(class com.mpos.lottery.te.gameimpl.union.sale.service.UnionTicketServiceImpl) to cancel transaction(gameType=8,terminalId=111,transType=200,protocolVersion=1.5.0).
[2015-05-29 17:13:44,166][Test worker][ERROR][TEPortServlet] No manual cancellation allowed of game instance(gameId=GAME-UNION-111,number=20090408).
com.mpos.lottery.te.config.exception.ApplicationException: No manual cancellation allowed of game instance(gameId=GAME-UNION-111,number=20090408).
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.allowManualCancellation(AbstractTicketService.java:366)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelByTicket(AbstractTicketService.java:217)
	at com.mpos.lottery.te.gamespec.sale.service.AbstractTicketService.cancelOrReverse(AbstractTicketService.java:283)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:203)
	at com.mpos.lottery.te.trans.service.impl.TransactionServiceImpl.reverseOrCancel(TransactionServiceImpl.java:227)
	at sun.reflect.GeneratedMethodAccessor288.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy55.reverseOrCancel(Unknown Source)
	at com.mpos.lottery.te.gameimpl.union.UnionController.cancelByTicket(UnionController.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.mpos.lottery.common.router.RoutineRegistry.route(RoutineRegistry.java:57)
	at com.mpos.lottery.te.port.service.CommonFacadeService.routeRequest(CommonFacadeService.java:237)
	at com.mpos.lottery.te.port.service.CommonFacadeService.facade(CommonFacadeService.java:96)
	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
	at com.sun.proxy.$Proxy85.facade(Unknown Source)
	at com.mpos.lottery.te.port.TEPortServlet.doPost(TEPortServlet.java:121)
	at com.mpos.lottery.te.test.integration.BaseServletIntegrationTest.doPost(BaseServletIntegrationTest.java:80)
	at com.mpos.lottery.te.gameimpl.union.sale.UnionMannualCancellationIntegrationTest.testCancel_GameInstance_Disable(UnionMannualCancellationIntegrationTest.java:159)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)
	at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
	at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[2015-05-29 17:13:44,167][Test worker][DEBUG][ProtocolSerializer] Finish mac(macKey=P2Bbo6+bSSR9O2Qc89f3b4oHTyE1V2gF,macString=Protocal-Version:1.5|GPE_Id:GPE-111|Terminal-Id:111|Operator-Id:OPERATOR-111|Trans-BatchNumber:20150529|TractMsg-Id:1432890824144|Timestamp:20150529171344|Transaction-Type:4201|Transaction-Id:0115052900000000002098|Response-Code:261|):d084052751261040efab5ac4c3827792
[2015-05-29 17:13:44,168][Test worker][DEBUG][BaseServletIntegrationTest] Got response(code=261,length=0): 
</pre>
</span>
</div>
</div>
<div id="footer">
<p>Generated by 
<a href="http://www.gradle.org">Gradle 2.2.1</a> at 2015-5-29 17:14:48</p>
</div>
</div>
</body>